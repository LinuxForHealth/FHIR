{"version":3,"sources":["webpack:///./src/pages/guides/DB2OnCloudSetup.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-guides-db-2-on-cloud-setup-md-c4034d3988f6380c3a1d.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/FHIR/FHIR/fhir/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Using Db2 for persistence`}</h2>\n    <p>{`This document guides a developer or administrator through the steps necessary to setup and configure `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/catalog/services/db2\"\n      }}>{`IBM Db2 on IBM Cloud`}</a>{` as a persistence layer for the IBM FHIR Server.`}</p>\n    <h3><strong parentName=\"h3\">{`Create a Db2 instance`}</strong></h3>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Log in to your IBM Cloud account `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.ibm.com/\"\n          }}>{`Link`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<inlineCode parentName=\"p\">{`Create resource`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Choose `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.ibm.com/catalog/services/db2\"\n          }}>{`Db2`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the Pricing Plan - `}<inlineCode parentName=\"p\">{`Standard`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`Enterprise`}</inlineCode></p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note, the IBM FHIR Server does not support using the `}<em parentName=\"li\">{`Lite`}</em>{` plan.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create `}<inlineCode parentName=\"p\">{`Create`}</inlineCode></p>\n      </li>\n    </ol>\n    <p>{`Your instance is now creating or created.`}</p>\n    <h3><strong parentName=\"h3\">{`Scale the instance`}</strong></h3>\n    <p>{`Depending on the plan you choose, you may want to scale the instance after it has been created (e.g. 4 cores, 16GB). The instance can be scaled more than once, so it doesn’t matter if you don’t get the sizing right first time.`}</p>\n    <p>{`Note:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The scaling of the instance requires a service restart.`}</li>\n      <li parentName=\"ol\">{`The instance CPU/Memory are scalable up and down. The storage in only scaled up.`}</li>\n    </ol>\n    <h3><strong parentName=\"h3\">{`Create the administrator credential`}</strong></h3>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Navigate to the Db2 instance you created.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on the `}<inlineCode parentName=\"p\">{`Service credentials`}</inlineCode>{` panel.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`If the list of service credentials is empty, create a new one.`}\n            <ol parentName=\"li\">\n              <li parentName=\"ol\">{`Click `}<inlineCode parentName=\"li\">{`New credential (+)`}</inlineCode></li>\n              <li parentName=\"ol\">{`Enter the Name. Any name works for example, `}<inlineCode parentName=\"li\">{`ibm-fhir-server-db2`}</inlineCode>{`.`}</li>\n              <li parentName=\"ol\">{`Click Add`}</li>\n            </ol>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Access the credential, select View Credentials. The entry you just created looks like the following block of JSON(the secrets are blanked out here):`}</p>\n      </li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"apikey\": \"******\",\n  \"connection\": {\n    ...\n    \"db2\": {\n      \"authentication\": {\n        \"method\": \"direct\",\n        \"password\": \"P1234\",\n        \"username\": \"username1\"\n      },\n      \"certificate\": {\n        \"certificate_base64\": \"secret=\",\n        \"name\": \"9e529eec-97df-4574-8839-12345\"\n      },\n      \"composed\": [\n        \"db2://username1:P1234@1-2-3-4.databases.appdomain.cloud:31366/bludb?authSource=admin&replicaSet=replset\"\n      ],\n      \"database\": \"bludb\",\n      \"host_ros\": [\n        \"1-2-3-4.databases.appdomain.cloud:32116\"\n      ],\n      \"hosts\": [\n        {\n          \"hostname\": \"1-2-3-4.databases.appdomain.cloud\",\n          \"port\": 31366\n        }\n      ],\n      \"jdbc_url\": [\n        \"jdbc:db2://1-2-3-4.databases.appdomain.cloud:31366/bludb:user=<userid>;password=<your_password>;sslConnection=true;\"\n      ],\n      \"path\": \"/bludb\",\n      \"query_options\": {\n        \"authSource\": \"admin\",\n        \"replicaSet\": \"replset\"\n      },\n      \"replica_set\": \"replset\",\n      \"scheme\": \"db2\",\n      \"type\": \"uri\"\n    }\n  },\n  \"iam_apikey_description\": \"Auto-generated for key username1-fc89-48e1-a1ce-569ca6c6e3d5\",\n  \"iam_apikey_name\": \"Service credentials-1\",\n  \"iam_role_crn\": \"crn:v1:bluemix:public:iam::::serviceRole:Manager\",\n  \"iam_serviceid_crn\": \"secret\",\n  \"instance_administration_api\": {\n    \"deployment_id\": \"crn:v1:bluemix:public:dashdb-for-transactions:us-east:a/secret:\",\n    \"instance_id\": \"crn:v1:bluemix:public:dashdb-for-transactions:us-east:a/secret::\",\n    \"root\": \"https://api.us-east.db2.cloud.ibm.com/v4/ibm\"\n  }\n}\n`}</code></pre>\n    <ol {...{\n      \"start\": 4\n    }}>\n      <li parentName=\"ol\">{`Save these details for later, as these properties are needed to deploy and manage the IBM FHIR Server schema.`}</li>\n    </ol>\n    <p>{`For improved security, the `}<strong parentName=\"p\">{`admin`}</strong>{` user should only be used to deploy the schema objects (tables, indexes, stored procedures etc) and administer the database, NOT for connecting from the IBM FHIR Server application.`}</p>\n    <h3><strong parentName=\"h3\">{`Adding the FHIRSERVER user`}</strong></h3>\n    <p>{`Following the least-privilege principle, the IBM FHIR server itself recommends running as db user, not db administrator.`}</p>\n    <h4>{`Using IAM apiKey`}</h4>\n    <p>{`The IBM FHIR Server uses an API Key associated with an `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/iam/serviceids\"\n      }}>{`IAM Service Id`}</a>{`. The IAM Service Id is mapped to a Db2 user which is granted explicit privileges to the tables and stored procedures.`}</p>\n    <p>{`The IBM FHIR Server uses the access flow:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Read API Key and the tenant key from the fhir-server-config.json`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Connect to Db2 to access authenticated data using IAM`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Confirm tenant-key to access authorized data`}</p>\n      </li>\n    </ol>\n    <p>{`The steps to create the API key are:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`On the IBM Cloud console, upper right corner, select `}<inlineCode parentName=\"p\">{`Manage`}</inlineCode>{` > `}<inlineCode parentName=\"p\">{`Access (IAM)`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.ibm.com/iam/serviceids\"\n          }}>{`Service IDs panel`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<inlineCode parentName=\"p\">{`Create (+)`}</inlineCode></p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Enter a meaningful name, such as `}<inlineCode parentName=\"li\">{`fhir-service-id`}</inlineCode>{`.`}</li>\n          <li parentName=\"ol\">{`Enter a description, such as `}<inlineCode parentName=\"li\">{`for instance db2-ho`}</inlineCode>{`.`}</li>\n          <li parentName=\"ol\">{`Click the `}<inlineCode parentName=\"li\">{`Create`}</inlineCode>{`.`}</li>\n        </ol>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note (1): If you have already created the entry, click the entry.`}</li>\n          <li parentName=\"ul\">{`Note (2): You may have to wait for the table to populate.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select the `}<inlineCode parentName=\"p\">{`API keys`}</inlineCode>{` tab.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: This tab is not the same `}<inlineCode parentName=\"li\">{`IBM Cloud API keys`}</inlineCode>{` on the left.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`To create an API Key, select `}<inlineCode parentName=\"p\">{`Create (+)`}</inlineCode>{`.`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Enter a name for the api key, for example, `}<inlineCode parentName=\"li\">{`fhir-server-api`}</inlineCode>{`.`}</li>\n          <li parentName=\"ol\">{`Click `}<inlineCode parentName=\"li\">{`Create`}</inlineCode>{`.`}</li>\n          <li parentName=\"ol\">{`Copy or download the key.`}</li>\n        </ol>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: if you don’t retain a copy, don’t panic - you can simply delete the API key and create a new one. API keys are designed to support additions and deletions, so you add as many as you need and delete others for any reason.`}</li>\n        </ul>\n      </li>\n    </ol>\n    <p>{`This API key is used in the database configuration section of the `}<inlineCode parentName=\"p\">{`fhir-server-config.json`}</inlineCode>{` file.`}</p>\n    <p>{`Before the API key can be used, you need to create a Db2 user and associate it with the new ServiceId.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Navigate to the `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.ibm.com/resources\"\n          }}>{`Resources`}</a>{` page`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Find and click on your IBM Db2 on Cloud instance.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on Manage.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on Open Console.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click Administration > User Management`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`To confirm the IAM instance:`}\n            <ol parentName=\"li\">\n              <li parentName=\"ol\">{`Click Run Sql (click create new if not brought into SQL edit session)`}</li>\n              <li parentName=\"ol\">{`Enter the SQL`}\n                <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                    \"className\": \"language-sql\"\n                  }}>{`SELECT CASE WHEN VALUE = 'IBMIAMauth' THEN 1 ELSE 0 END AS IAM_ENABLED FROM SYSIBMADM.DBMCFG WHERE NAME = 'srvcon_gssplugin_list'\n`}</code></pre>\n              </li>\n              <li parentName=\"ol\">{`You see `}<inlineCode parentName=\"li\">{`0`}</inlineCode>{` if not IAM enabled.`}</li>\n            </ol>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click Add. A panel opens on the right-hand side.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Select Add IBMid User at the top.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`User ID: FHIRSERVER`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`IBMid: paste the service id (not service id name) from the Service Id created previously. To get that navigate to the service id you created earlier and click on `}<inlineCode parentName=\"p\">{`Details`}</inlineCode>{` link (top right side next to Actions Menu). A panel opens on the right-hand side which contains ID. This ID needs to be used as IBMid value.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Note (1): The page forces the value to lower-case, so `}<inlineCode parentName=\"p\">{`ServiceId`}</inlineCode>{` becomes `}<inlineCode parentName=\"p\">{`serviceid`}</inlineCode>{`. Don’t be alarmed, it still works.  Same for the User ID.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Note (2): Do NOT select Administrator. One should follow the least-privelege principal for the FHIRSERVER user.`}</p>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<inlineCode parentName=\"p\">{`Create`}</inlineCode>{`.`}</p>\n      </li>\n    </ol>\n    <p>{`You are now able to connect to the database as the FHIRSERVER user using only the API key created above.`}</p>\n    <h4>{`Using Db2 Auth`}</h4>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`On the Db2 Resource, click `}<inlineCode parentName=\"p\">{`Manage`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click `}<inlineCode parentName=\"p\">{`Open Console`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click Administration > User Management`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click Add User, and enter the user details with a sufficiently complex password. Set the `}<inlineCode parentName=\"p\">{`User Privilege`}</inlineCode>{` as `}<inlineCode parentName=\"p\">{`User`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Save these details for the datasource.xml.`}</p>\n      </li>\n    </ol>\n    <h3><strong parentName=\"h3\">{`Testing the connection`}</strong></h3>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"https://repo1.maven.org/maven2/com/ibm/db2/jcc/11.5.6.0/jcc-11.5.6.0.jar\"\n      }}>{`Db2 driver (click here to download)`}</a>{` is able to execute a connectivity test to check the configuration of the combo of API-key/Service-Id/Db2-User-Id.`}</p>\n    <h4>{`Test IAM Access`}</h4>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Copy the command to your code editor`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`java -cp /path/to/db2jcc4.jar com.ibm.db2.jcc.DB2Jcc  -url \"jdbc:db2://<DB2-HOSTNAME>:<DB2-HOST-PORT>/BLUDB:apiKey=<API-KEY>;securityMechanism=15;sslConnection=true;\"\n`}</code></pre>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: Don’t forget the trailing `}<inlineCode parentName=\"li\">{`;`}</inlineCode>{` in the URL. Some of the documented examples don’t include it, but it is required in order for the connection to work, although this may be fixed in a future driver release. This only affects this test URL, not the actual FHIR server configuration.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Replace the following values with your service details:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`/path/to/db2jcc4.jar`}</inlineCode>{` : replace with the path to your driver jar.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`<DB-HOSTNAME>`}</inlineCode>{`: the hostname of your Db2 service from the Service Credentials page`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`<DB-HOST-PORT>`}</inlineCode>{`: the port of your Db2 service from the Service Credentials page`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\"><inlineCode parentName=\"p\">{`<API-KEY>`}</inlineCode>{`: the API key value created in the previous section`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Note: When using an API Key, no username needs to be provided. This is because the API Key maps to a ServiceId, and that ServiceId is mapped to the Db2 user.`}</p>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run in your favorite terminal, and you should see no errors in the output. You should see output like:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`[jcc][10516][13709]Test Connection Successful.\n`}</code></pre>\n      </li>\n    </ol>\n    <h4>{`Test Db2 Auth Access`}</h4>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Copy the command to your code editor`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`java -cp /path/to/db2jcc4.jar com.ibm.db2.jcc.DB2Jcc  -url \"jdbc:db2://<DB2-HOSTNAME>:<DB2-HOST-PORT>/bludb:user=<userid>;password=<your_password>;sslConnection=true;\"\n`}</code></pre>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: Don’t forget the trailing `}<inlineCode parentName=\"li\">{`;`}</inlineCode>{` in the URL. Some of the documented examples don’t include it, but it is required in order for the connection to work, although this may be fixed in a future driver release. This only affects this test URL, not the actual FHIR server configuration.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Replace the following values with your service details:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`/path/to/db2jcc4.jar`}</inlineCode>{` : replace with the path to your driver jar.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<DB-HOSTNAME>`}</inlineCode>{`: the hostname of your Db2 service from the Service Credentials page`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<DB-HOST-PORT>`}</inlineCode>{`: the port of your Db2 service from the Service Credentials page`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<userid>`}</inlineCode>{`: The userid to acecss the db`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<your_password>`}</inlineCode>{`: The password to access the db with`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run in your favorite terminal, and you should see no errors in the output. You should see output like:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`[jcc][10516][13709]Test Connection Successful.\n`}</code></pre>\n      </li>\n    </ol>\n    <h3><strong parentName=\"h3\">{`Deploy the IBM FHIR Server schema`}</strong></h3>\n    <p>{`Now that you’ve created the database and credentials, use the `}<inlineCode parentName=\"p\">{`fhir-persistence-schema`}</inlineCode>{` utility to deploy the IBM FHIR Server schema:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`download the `}<inlineCode parentName=\"p\">{`fhir-persistence-schema`}</inlineCode>{` cli jar from the corresponding project release: `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/IBM/FHIR/releases\"\n          }}>{`https://github.com/IBM/FHIR/releases`}</a></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`create a properties file named db2.properties with the Db2 Admin connection info from IBM Cloud; for example:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-sh\"\n          }}>{`db.host=<DB-HOSTNAME>\ndb.port=<DB-HOST-PORT>\ndb.database=bludb\nuser=<USERID>\npassword=<PASSWORD>\nsslConnection=true\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`execute the following commands:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-sh\"\n          }}>{`java -jar schema/fhir-persistence-schema-*-cli.jar \\\\\n  --prop-file db2.properties --schema-name FHIRDATA --create-schemas\njava -jar schema/fhir-persistence-schema-*-cli.jar \\\\\n  --prop-file db2.properties --schema-name FHIRDATA --update-schema\njava -jar schema/fhir-persistence-schema-*-cli.jar \\\\\n  --prop-file db2.properties --schema-name FHIRDATA --grant-to FHIRSERVER\njava -jar schema/fhir-persistence-schema-*-cli.jar \\\\\n  --prop-file db2.properties --schema-name FHIRDATA --allocate-tenant default\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`save the tenantKey from the `}<inlineCode parentName=\"p\">{`allocate-tenant`}</inlineCode>{` step above; this is needed to configure the IBM FHIR Server datasource in the next step`}</p>\n      </li>\n    </ol>\n    <p>{`For more information on using the fhir-persistence-schema cli jar, see `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/FHIR/tree/main/fhir-persistence-schema/docs/SchemaToolUsageGuide.md\"\n      }}>{`https://github.com/IBM/FHIR/tree/main/fhir-persistence-schema/docs/SchemaToolUsageGuide.md`}</a>{`.`}</p>\n    <h3><strong parentName=\"h3\">{`Configuring an IBM FHIR Server datasource`}</strong></h3>\n    <p>{`The IBM FHIR Server uses the native Open Liberty datasources. To configure a FHIR tenant datasource for a tenantKey, use the following template in the fhir-server-config.json:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`        \"persistence\": {\n            \"datasources\": {\n                \"default\": {\n                    \"tenantKey\": \"myTenantKey\",\n                    \"currentSchema\": \"\\${DB_SCHEMA}\",\n                    \"hints\" : {\n                        \"search.reopt\": \"ONCE\"\n                    },\n                    \"type\": \"db2\",\n                }\n            }\n        }\n`}</code></pre>\n    <p>{`Since release 4.3.2 you can use the `}<inlineCode parentName=\"p\">{`search.reopt`}</inlineCode>{` query optimizer hint (shown above) to improve the performance of certain search queries involving multiple search parameters. This optimization is currently only available for Db2. Valid values are “ALWAYS” and “ONCE”. See Db2 documentation for `}<inlineCode parentName=\"p\">{`REOPT`}</inlineCode>{` for more details.`}</p>\n    <p>{`To configure the datasource.xml for db2 create a datasource.xml for the configDropins folder.  Note: CurrentSchema is case sensative to what you used in the fhir-persistance-schema tool used above.`}</p>\n    <h4>{`For IAM User`}</h4>\n    <p>{`Create a file as the following`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<server>\n    <!-- ============================================================== -->\n    <!-- TENANT: default; DSID: default; TYPE: read-write               -->\n    <!-- ============================================================== -->\n    <dataSource id=\"fhirDefaultDefault\" jndiName=\"jdbc/fhir_default_default\" type=\"javax.sql.XADataSource\" statementCacheSize=\"200\" syncQueryTimeoutWithTransactionTimeout=\"true\" validationTimeout=\"30s\" isolationLevel=\"TRANSACTION_READ_COMMITTED\">\n        <jdbcDriver javax.sql.XADataSource=\"com.ibm.db2.jcc.DB2XADataSource\" libraryRef=\"sharedLibDb2\"/>\n        <properties.db2.jcc\n            apiKey=\"\\${DB_APIKEY}\"\n            serverName=\"\\${DB_HOSTNAME}\"\n            currentSchema=\"\\${DB_SCHEMA}\"\n            databaseName=\"\\${DB_NAME}\"\n            driverType=\"4\"\n            pluginName=\"IBMIAMauth\"\n            portNumber=\"\\${DB_PORT}\"\n            securityMechanism=\"15\"\n            sslConnection=\"true\" />\n        <connectionManager maxPoolSize=\"200\" minPoolSize=\"20\" connectionTimeout=\"60s\" maxIdleTime=\"2m\" numConnectionsPerThreadLocal=\"0\"/>\n    </dataSource>\n</server>\n`}</code></pre>\n    <h4>{`For Db2 Auth user`}</h4>\n    <p>{`Create a file as the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<server>\n    <!-- ============================================================== -->\n    <!-- TENANT: default; DSID: default; TYPE: read-write               -->\n    <!-- ============================================================== -->\n    <dataSource id=\"fhirDefaultDefault\" jndiName=\"jdbc/fhir_default_default\" type=\"javax.sql.XADataSource\" statementCacheSize=\"200\" syncQueryTimeoutWithTransactionTimeout=\"true\" validationTimeout=\"30s\" isolationLevel=\"TRANSACTION_READ_COMMITTED\">\n        <jdbcDriver javax.sql.XADataSource=\"com.ibm.db2.jcc.DB2XADataSource\" libraryRef=\"sharedLibDb2\"/>\n        <properties.db2.jcc\n            serverName=\"\\${DB_HOSTNAME}\"\n            currentSchema=\"\\${DB_SCHEMA}\"\n            databaseName=\"\\${DB_NAME}\"\n            driverType=\"4\"\n            portNumber=\"\\${DB_PORT}\"\n            sslConnection=\"true\"\n            user=\"fhirserver\"\n            password=\"mypassword\"\n         />\n        <connectionManager maxPoolSize=\"200\" minPoolSize=\"20\" connectionTimeout=\"60s\" maxIdleTime=\"2m\" numConnectionsPerThreadLocal=\"0\"/>\n    </dataSource>\n</server>\n`}</code></pre>\n    <p>{`Each tenant datastore must have a corresponding dataSource definition and these dataSources must either follow the default jndiName pattern (`}<inlineCode parentName=\"p\">{`jndi/fhir_[tenantid]_[dsid]`}</inlineCode>{`) or the name must be explicitly configured in the corresponding section of `}<inlineCode parentName=\"p\">{`fhir-server-config.json`}</inlineCode>{`.`}</p>\n    <h4>{`Mapping from IBM Db2 on Cloud endpoint credentials`}</h4>\n    <p>{`This section explains how to populate the FHIR datasource from IBM Db2 on Cloud configuration details from an example configuration:`}</p>\n    <p>{`Use the following table to populate your datasource.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`IBM FHIR Server Configuration`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`serverName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select `}<inlineCode parentName=\"td\">{`hostname`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`portNumber`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select  `}<inlineCode parentName=\"td\">{`port`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`databaseName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select  `}<inlineCode parentName=\"td\">{`db`}</inlineCode>{`, generally always `}<inlineCode parentName=\"td\">{`BLUDB`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`apiKey`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the created user in the assigned to the `}<inlineCode parentName=\"td\">{`fhiruser`}</inlineCode>{` group. Reference Section `}<strong parentName=\"td\">{`FHIRSERVER User and API Key`}</strong></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`securityMechanism`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`If using IAM, set to `}<inlineCode parentName=\"td\">{`15`}</inlineCode>{` to trigger the use of IAM-based `}<inlineCode parentName=\"td\">{`apiKey`}</inlineCode>{` authentication`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`pluginName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`If using IAM, set to `}<inlineCode parentName=\"td\">{`IBMIAMauth`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`currentSchema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the schema name of your deployed tenant Schema, for instance `}<inlineCode parentName=\"td\">{`FHIRDATA`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`user`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the userid`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`password`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the password for the user`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`driverType`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`4`}</inlineCode>{`, always JDBC Type-4`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslConnection`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`true`}</inlineCode>{`, if you are using IBM Cloud`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslTrustStoreLocation`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local server path to the truststore, `}<inlineCode parentName=\"td\">{`resources/security/dbTruststore.jks`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslTrustStorePassword`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The password to the truststore`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <ul>\n      <li parentName=\"ul\">{`Reference the section `}<strong parentName=\"li\">{`Create the Administrator Credential`}</strong>{` to see an example.`}</li>\n    </ul>\n    <p>{`Note, no username properties are given, because the authentication module only requires the API-KEY.`}</p>\n    <h3><strong parentName=\"h3\">{`Configuring a BulkData’s Liberty Datasource with API key`}</strong></h3>\n    <p>{`The IBM FHIR Server Bulk Data modules utilize Java Batch (JSR-352) from the Liberty Profile feature - `}<inlineCode parentName=\"p\">{`batch-1.0`}</inlineCode>{`. The batch feature is configured to use Db2 as follows:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a Db2 user (e.g. FHIRBATCH)`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Associate it with a ServiceId (no need to create an Administration user, a simple user has sufficient privileges) using the same procedure you followed for the fhir-server ServiceId user.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create the datasource`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Db2 with IAM `}<a parentName=\"li\" {...{\n              \"href\": \"https://github.com/IBM/FHIR/blob/main/fhir-server-webapp/src/main/liberty/config/configDropins/disabled/db2-cloud/bulkdata.xml\"\n            }}>{`https://github.com/IBM/FHIR/blob/main/fhir-server-webapp/src/main/liberty/config/configDropins/disabled/db2-cloud/bulkdata.xml`}</a></li>\n          <li parentName=\"ol\">{`Db2 with Db2Auth `}<a parentName=\"li\" {...{\n              \"href\": \"https://github.com/IBM/FHIR/blob/main/fhir-server-webapp/src/main/liberty/config/configDropins/disabled/db2/bulkdata.xml\"\n            }}>{`https://github.com/IBM/FHIR/blob/main/fhir-server-webapp/src/main/liberty/config/configDropins/disabled/db2/bulkdata.xml`}</a></li>\n        </ol>\n      </li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Note: The Java Batch is configured in `}<inlineCode parentName=\"li\">{`bulkdata.xml`}</inlineCode>{` and included from the IBM FHIR Server’s `}<inlineCode parentName=\"li\">{`server.xml`}</inlineCode>{` which is installed to `}<inlineCode parentName=\"li\">{`{wlp}/usr/server/defaultServer`}</inlineCode>{`. (fhir-server is installed locally)`}</li>\n      <li parentName=\"ul\">{`Note: While this feature is not required, it’s best to configure this datasource while configuring the main datasource.`}</li>\n    </ul>\n    <h3><strong parentName=\"h3\">{`SSL Certificate`}</strong></h3>\n    <p>{`The Db2 certificate should be added to the Liberty Profile truststore. `}<em parentName=\"p\">{`Be sure to use the same Java runtime that Liberty Profile uses when manipulating any keystores.`}</em></p>\n    <h3><strong parentName=\"h3\">{`Encrypt Secrets`}</strong></h3>\n    <p>{`All passwords including apiKey values should be encrypted using the Liberty Profile securityUtility.`}</p>\n    <h1>{`Appendix: Db2 Lite Plan`}</h1>\n    <p>{`The Lite plan is not supported for development and evaluation.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The schema size is larger than the available space.`}</li>\n      <li parentName=\"ul\">{`The instance is not enabled with IAM, and you may use the `}<inlineCode parentName=\"li\">{`Service Credentials`}</inlineCode>{` that are created to connect to configure the datasource.`}</li>\n    </ul>\n    <h1><strong parentName=\"h1\">{`References`}</strong></h1>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/services/Db2onCloud?topic=Db2onCloud-db_details_cxn_creds\"\n        }}>{`Db2 on Cloud: Database details and connection credentials`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}