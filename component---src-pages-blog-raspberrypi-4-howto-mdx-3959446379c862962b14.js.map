{"version":3,"sources":["webpack:///./src/pages/blog/raspberrypi4howto.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-blog-raspberrypi-4-howto-mdx-3959446379c862962b14.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/FHIR/FHIR/fhir/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`By Robin Arnold    |    Published September 13, 2019`}</p>\n    <img {...{\n      \"src\": \"https://ibm.github.io/FHIR/images/piOnFhir30.jpg\",\n      \"alt\": \"IBM FHIR Server on Raspberry Pi 4\"\n    }}></img>\n    <h2>{`Usage`}</h2>\n    <p>{`This installation is for curiosity only and should not be used with PHI, only synthetic test data. Production instances require additional hardening which is outside the scope of this guide.`}</p>\n    <p>{`The default password used throughout is `}<inlineCode parentName=\"p\">{`change-password`}</inlineCode>{` and this is configured as clear-text in the configuration files to make it even more obvious that it should be changed as part of any hardening. Refer to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide\"\n      }}>{`FHIRServerUsersGuide`}</a>{` for more details.`}</p>\n    <h2>{`Introduction`}</h2>\n    <p>{`The IBM FHIR Server runs as a web application in the Open Liberty application server. By default persistence is provided with a Derby database, but it can also be configured to use IBM Db2 on Cloud. This example shall use the default Derby instance.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Component`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Details`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Hardware`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Raspberry Pi 4`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Memory`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`4GB`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`OS`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Raspbian (Buster)`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Storage`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`64GB microSD`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Java`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`openjdk11`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Apache Maven`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`3.6.1`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Application Server`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Open Liberty 19.0.0.8`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`HTTPS Port`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`9443`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Default user`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`fhiruser`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Default password`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`change-password`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Set up your Raspberry Pi 4 (4GB model) using Raspbian (`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.raspberrypi.org/downloads/\"\n      }}>{`https://www.raspberrypi.org/downloads/`}</a>{`).`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`TIP: Under load, the Raspberry Pi 4 CPU throttles when it reaches a critical temperature, so a case with cooling is recommended. Without naming products, an aluminum case which acts as a heat sink could be a good choice. The CPU definitely throttles during the build using the official (plastic) Raspberry Pi 4 case.`}</p>\n    </blockquote>\n    <h2>{`Development Environment and Prerequisites`}</h2>\n    <p>{`To build we need three things:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`openjdk11 (already available)`}</li>\n      <li parentName=\"ol\">{`Apache Maven`}</li>\n      <li parentName=\"ol\">{`Access to the internet (for Maven dependencies)`}</li>\n    </ol>\n    <h3>{`Install Maven`}</h3>\n    <p>{`You can use apt-get to install Apache Maven but if you want to avoid all the dependencies which come along with it, just grab the binary release and unpack it`}</p>\n    <p>{`OPTION A:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`sudo apt-get install maven\n`}</code></pre>\n    <p>{`OPTION B:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`wget https://www-us.apache.org/dist/maven/maven-3/3.6.1/binaries/apache-maven-3.6.1-bin.tar.gz -P /tmp\nsudo mkdir -p /opt/tools && cd /opt/tools && tar xzvf /tmp/apache-maven-3.6.1-bin.tar.gz\n\n`}</code></pre>\n    <p>{`If installing Maven manually, add it to your PATH:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`# Add Maven to PATH\nexport PATH=\"/opt/tools/apache-maven-3.6.1/bin:\\${PATH}\"\n`}</code></pre>\n    <h3>{`Check`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`pi@raspberrypi:~/git/FHIR $ mvn -version\nApache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-04T15:00:29-04:00)\nMaven home: /opt/tools/apache-maven-3.6.1\nJava version: 11.0.3, vendor: Raspbian, runtime: /usr/lib/jvm/java-11-openjdk-armhf\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.19.66-v7l+\", arch: \"arm\", family: \"unix\"\n`}</code></pre>\n    <h2>{`Environment`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Component`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Details`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Liberty Home`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`/opt/ibm/fhir-server/wlp`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`JAVA_HOME`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`/usr/lib/jvm/java-11-openjdk-armhf`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2>{`Building`}</h2>\n    <p>{`Set up your development environment and clone the repository:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`mkdir -p ~/git && cd ~/git && git clone https://github.com/IBM/FHIR.git\n`}</code></pre>\n    <p>{`Now you should be ready to build:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`cd ~/git/FHIR\nmvn clean install -f fhir-parent/pom.xml\n`}</code></pre>\n    <p>{`Be patient. A lot of unit tests are executed, including processing a number of the FHIR specification examples in various contexts which is fairly CPU intensive. Unit tests in the fhir-persistence-jdbc project use a functional schema deployed in a Derby database, exercising the bulk of the persistence code except for the REST layer.`}</p>\n    <p>{`Some exceptions from negative tests may appear in the build log. As long as the build completes, these shouldn’t be a concern. Success should look like this:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`[INFO] Reactor Summary for IBM FHIR Server FHIR 4.0.0-SNAPSHOT:\n[INFO]\n[INFO] IBM FHIR Server ...................... SUCCESS [  8.537 s]\n[INFO] fhir-core .......................................... SUCCESS [  7.478 s]\n[INFO] fhir-task-api ...................................... SUCCESS [  0.583 s]\n[INFO] fhir-task-core ..................................... SUCCESS [  9.217 s]\n[INFO] fhir-database-utils ................................ SUCCESS [ 16.877 s]\n[INFO] fhir-config ........................................ SUCCESS [ 12.278 s]\n[INFO] fhir-audit ......................................... SUCCESS [ 13.421 s]\n[INFO] fhir-model ......................................... SUCCESS [03:32 min]\n[INFO] fhir-conformance ................................... SUCCESS [ 39.934 s]\n[INFO] fhir-ig-us-core .................................... SUCCESS [ 23.337 s]\n[INFO] fhir-search ........................................ SUCCESS [01:16 min]\n[INFO] fhir-persistence ................................... SUCCESS [ 38.613 s]\n[INFO] fhir-replication-api ............................... SUCCESS [ 11.191 s]\n[INFO] fhir-persistence-proxy ............................. SUCCESS [ 28.315 s]\n[INFO] fhir-persistence-schema ............................ SUCCESS [04:44 min]\n[INFO] fhir-persistence-jdbc .............................. SUCCESS [16:34 min]\n[INFO] fhir-provider ...................................... SUCCESS [  9.223 s]\n[INFO] fhir-operation ..................................... SUCCESS [ 26.337 s]\n[INFO] fhir-operation-validate ............................ SUCCESS [  1.065 s]\n[INFO] fhir-operation-document ............................ SUCCESS [  1.074 s]\n[INFO] fhir-operation-healthcheck ......................... SUCCESS [  0.547 s]\n[INFO] fhir-client ........................................ SUCCESS [ 12.460 s]\n[INFO] fhir-notification .................................. SUCCESS [  0.971 s]\n[INFO] fhir-notification-kafka ............................ SUCCESS [  0.769 s]\n[INFO] fhir-notification-websocket ........................ SUCCESS [  0.931 s]\n[INFO] FHIR Server REST API Implementation ................ SUCCESS [ 36.295 s]\n[INFO] FHIR Server REST API WebApp ........................ SUCCESS [ 11.151 s]\n[INFO] fhir-server-test ................................... SUCCESS [  6.484 s]\n[INFO] fhir-swagger-generator ............................. SUCCESS [  5.121 s]\n[INFO] fhir-openapi ....................................... SUCCESS [  0.739 s]\n[INFO] fhir-install ....................................... SUCCESS [ 59.261 s]\n[INFO] fhir-coverage-reports .............................. SUCCESS [ 43.491 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  33:28 min\n[INFO] Finished at: 2019-09-11T19:23:06-04:00\n[INFO] ------------------------------------------------------------------------\n`}</code></pre>\n    <h2>{`Installation`}</h2>\n    <p>{`The above build creates an installable artifact:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`~/git/FHIR/fhir-install/target/fhir-server-distribution.zip\n`}</code></pre>\n    <p>{`Unpack the archive into a working directory:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`mkdir -p ~/unpack && cd ~/unpack && unzip ~/git/FHIR/fhir-install/target/fhir-server-distribution.zip\n`}</code></pre>\n    <p>{`Decide where you want to install. As this isn’t a production server, installing it under the pi user is convenient.`}</p>\n    <p>{`mkdir -p ~/runtime/fhir-server && sh ~/unpack/fhir-server-dist/install.sh ~/runtime/fhir-server`}</p>\n    <p>{`Check that the Liberty runtime was installed correctly:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`~/runtime/fhir-server/wlp/bin/server status fhir-server\n\nServer fhir-server is not running.\n`}</code></pre>\n    <p>{`The default configuration uses a 4GB heap size which is too large for the Pi. Edit the jvm.options file and reduce the memory footprint using -Xmx1024M and -Xms1024M:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`pi@raspberrypi:~ $ vi ~/runtime/fhir-server/wlp/usr/servers/fhir-server/jvm.options\n...\ngrep -- -Xm ~/runtime/fhir-server/wlp/usr/servers/fhir-server/jvm.options\n-Xms1024M\n-Xmx1024M\n\n`}</code></pre>\n    <p>{`Start the server (the first startup takes some time):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`~/runtime/fhir-server/wlp/bin/server start fhir-server\n\nStarting server fhir-server.\nServer fhir-server started with process ID 1234.\n`}</code></pre>\n    <h2>{`Smoke Test`}</h2>\n    <p>{`Run a basic connectivity check. This is a primitive check to ensure that the application server is accessible and that the FHIR web application is running:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`sh ~/unpack/fhir-server-dist/fhirSmokeTest.sh localhost 9443\n\nChecking if server localhost is accessible on port 9443 ... OK!\nChecking FHIR server signature... OK!\nChecking FHIR API version... OK!\n\nSuccess! All checks passed.\n`}</code></pre>\n    <h2>{`Clean up`}</h2>\n    <pre><code parentName=\"pre\" {...{}}>{`rm -fr ~/unpack/fhir-server-dist\nrm -f /tmp/apache-maven-3.6.1-bin.tar.gz\n`}</code></pre>\n    <h2>{`Create a Patient Resource`}</h2>\n    <p>{`Create a new patient resource using the following POST. The FHIR server will allocate a unique logical identifier (UUID):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -k \\\\\n-H 'Content-Type: application/json' \\\\\n-u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient' -d '\n{\n    \"resourceType\" : \"Patient\",\n    \"active\" : true,\n    \"name\" : [ {\n        \"family\" : \"Ortiz\",\n        \"given\" : [ \"David\" ]\n    } ],\n    \"gender\" : \"male\"\n}\n'\n`}</code></pre>\n    <p>{`The FHIR server should respond with a 201 Created status:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`HTTP/2 201\nlocation: https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc/_history/1\netag: W/\"1\"\nlast-modified: 2019-09-12T19:22:02.159503Z\ndate: Thu, 12 Sep 2019 19:22:05 GMT\ncontent-length: 0\ncontent-language: en-US\n`}</code></pre>\n    <p>{`Use the `}<inlineCode parentName=\"p\">{`location:`}</inlineCode>{` value returned from `}<strong parentName=\"p\">{`your`}</strong>{` POST to read back the resource:`}</p>\n    <p>{`Command (example):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl --silent -k -H 'Accept: application/json' -u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc' | python -m json.tool\n`}</code></pre>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Remember to use the patient logical id returned as the location: header in your POST - if you try to use `}<inlineCode parentName=\"p\">{`041786ad-d6a1-42ea-bf47-4dd8eb08a5fc`}</inlineCode>{` the response status will be Not Found.`}</p>\n    </blockquote>\n    <p>{`Output:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n    \"active\": true,\n    \"gender\": \"male\",\n    \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n    \"meta\": {\n        \"lastUpdated\": \"2019-09-12T19:22:02.159503Z\",\n        \"versionId\": \"1\"\n    },\n    \"name\": [\n        {\n            \"family\": \"Ortiz\",\n            \"given\": [\n                \"David\"\n            ]\n        }\n    ],\n    \"resourceType\": \"Patient\"\n}\n`}</code></pre>\n    <p>{`Now we can update the resource using a PUT (David => Dave). Again, it is important to use the logical ids from your example, not the values shown here. This includes the “id” field in the body, which should match the logical id of the URL:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -k -i \\\\\n-X PUT \\\\\n-H 'Content-Type: application/json' \\\\\n-u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc' -d '\n{\n    \"active\": true,\n    \"gender\": \"male\",\n    \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n    \"meta\": {\n        \"lastUpdated\": \"2019-09-12T19:22:02.159503Z\",\n        \"versionId\": \"1\"\n    },\n    \"name\": [\n        {\n            \"family\": \"Ortiz\",\n            \"given\": [\n                \"Dave\"\n            ]\n        }\n    ],\n    \"resourceType\": \"Patient\"\n}\n'\n`}</code></pre>\n    <p>{`Response:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`HTTP/2 200\nlocation: https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc/_history/2\netag: W/\"2\"\nlast-modified: 2019-09-12T19:46:24.656131Z\ndate: Thu, 12 Sep 2019 19:46:26 GMT\ncontent-length: 0\ncontent-language: en-US\n`}</code></pre>\n    <p>{`Note the location: has now changed to indicate the new version is 2.`}</p>\n    <p>{`Retrieve the latest version:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl --silent -k -H 'Accept: application/json' -u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc' | python -m json.tool\n`}</code></pre>\n    <p>{`Response:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl --silent -k -H 'Accept: application/json' -u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc' | python -m json.tool\n{\n    \"active\": true,\n    \"gender\": \"male\",\n    \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n    \"meta\": {\n        \"lastUpdated\": \"2019-09-12T19:46:24.656131Z\",\n        \"versionId\": \"2\"\n    },\n    \"name\": [\n        {\n            \"family\": \"Ortiz\",\n            \"given\": [\n                \"Dave\"\n            ]\n        }\n    ],\n    \"resourceType\": \"Patient\"\n}\n\n`}</code></pre>\n    <p>{`Note that the given name is “Dave”.`}</p>\n    <p>{`To see a previous version, perform a vread:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl --silent -k -H 'Accept: application/json' -u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc/_history/1' | python -m json.tool\n\n`}</code></pre>\n    <p>{`Response:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n    \"active\": true,\n    \"gender\": \"male\",\n    \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n    \"meta\": {\n        \"lastUpdated\": \"2019-09-12T19:22:02.159503Z\",\n        \"versionId\": \"1\"\n    },\n    \"name\": [\n        {\n            \"family\": \"Ortiz\",\n            \"given\": [\n                \"David\"\n            ]\n        }\n    ],\n    \"resourceType\": \"Patient\"\n}\n\n`}</code></pre>\n    <p>{`In version 1, we see that the given name is the original value of “David”.`}</p>\n    <p>{`All the versions of the resource can be read using a history read operation:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl --silent -k -H 'Accept: application/json' -u 'fhiruser:change-password' 'https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc/_history' | python -m json.tool\n`}</code></pre>\n    <p>{`The response is a FHIR bundle resource containing both versions of the Patient. Note the name change from David (version 1) to Dave (version 2):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n    \"entry\": [\n        {\n            \"fullUrl\": \"https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n            \"request\": {\n                \"method\": \"PUT\",\n                \"url\": \"Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\"\n            },\n            \"resource\": {\n                \"active\": true,\n                \"gender\": \"male\",\n                \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n                \"meta\": {\n                    \"lastUpdated\": \"2019-09-12T19:46:24.656131Z\",\n                    \"versionId\": \"2\"\n                },\n                \"name\": [\n                    {\n                        \"family\": \"Ortiz\",\n                        \"given\": [\n                            \"Dave\"\n                        ]\n                    }\n                ],\n                \"resourceType\": \"Patient\"\n            },\n            \"response\": {\n                \"status\": \"200\"\n            }\n        },\n        {\n            \"fullUrl\": \"https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n            \"request\": {\n                \"method\": \"POST\",\n                \"url\": \"Patient\"\n            },\n            \"resource\": {\n                \"active\": true,\n                \"gender\": \"male\",\n                \"id\": \"041786ad-d6a1-42ea-bf47-4dd8eb08a5fc\",\n                \"meta\": {\n                    \"lastUpdated\": \"2019-09-12T19:22:02.159503Z\",\n                    \"versionId\": \"1\"\n                },\n                \"name\": [\n                    {\n                        \"family\": \"Ortiz\",\n                        \"given\": [\n                            \"David\"\n                        ]\n                    }\n                ],\n                \"resourceType\": \"Patient\"\n            },\n            \"response\": {\n                \"status\": \"200\"\n            }\n        }\n    ],\n    \"id\": \"cecfa920-ead0-402a-9431-35b7e6c2a768\",\n    \"link\": [\n        {\n            \"relation\": \"self\",\n            \"url\": \"https://localhost:9443/fhir-server/api/v4/Patient/041786ad-d6a1-42ea-bf47-4dd8eb08a5fc/_history\"\n        }\n    ],\n    \"resourceType\": \"Bundle\",\n    \"total\": 2,\n    \"type\": \"history\"\n}\n\n`}</code></pre>\n    <h3>{`END-OF-DOCUMENT`}</h3>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}