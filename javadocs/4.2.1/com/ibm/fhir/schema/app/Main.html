<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.7) on Wed May 06 19:39:07 UTC 2020 -->
<title>Main (IBM FHIR Server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-05-06">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Main (IBM FHIR Server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":9,"i19":10,"i20":10,"i21":9,"i22":10,"i23":10,"i24":10,"i25":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Main.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>IBM</span>&nbsp;FHIR®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../index.html?com/ibm/fhir/schema/app/Main.html" target="_top">Frames</a></li>
<li><a href="Main.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.ibm.fhir.schema.app</a></div>
<h2 title="Class Main" class="title">Class Main</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.ibm.fhir.schema.app.Main</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<object type="image/svg+xml" data="Main.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public class <span class="typeNameLabel">Main</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Utility app to connect to a database and create/update the IBM FHIR Server schema.
 The DDL processing is idempotent, with only the necessary changes applied.
 <br>
 This utility also includes an option to exercise the tenant partitioning code.</div>
</li>
</ul>
</div>
<div class="summary" style="clear:right;">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../model/DbType.html" title="enum in com.ibm.fhir.schema.model">DbType</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MULTITENANT_FEATURE_ENABLED">MULTITENANT_FEATURE_ENABLED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">Main</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addProperty(java.lang.String)">addProperty</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pair)</code></th>
<td class="colLast">
<div class="block">Parse the given key=value string and add to the properties being collected</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addTenantKey()">addTenantKey</a></span>()</code></th>
<td class="colLast">
<div class="block">Add a new tenant key so that we can rotate the values (add a
 new key, update config files, then remove the old key).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#allocateTenant()">allocateTenant</a></span>()</code></th>
<td class="colLast">
<div class="block">Allocate this tenant, creating new partitions if required.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyModel(com.ibm.fhir.database.utils.model.PhysicalDataModel,com.ibm.fhir.database.utils.api.IDatabaseAdapter,com.ibm.fhir.task.api.ITaskCollector,com.ibm.fhir.database.utils.version.VersionHistoryService)">applyModel</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in com.ibm.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm,
          <a href="../../database/utils/api/IDatabaseAdapter.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseAdapter</a>&nbsp;adapter,
          <a href="../../task/api/ITaskCollector.html" title="interface in com.ibm.fhir.task.api">ITaskCollector</a>&nbsp;collector,
          <a href="../../database/utils/version/VersionHistoryService.html" title="class in com.ibm.fhir.database.utils.version">VersionHistoryService</a>&nbsp;vhs)</code></th>
<td class="colLast">
<div class="block">Start the schema object creation tasks and wait for everything to complete</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkCompatibility()">checkCompatibility</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkIfTenantNameAndTenantKeyExists(com.ibm.fhir.database.utils.db2.Db2Adapter,java.lang.String,java.lang.String)">checkIfTenantNameAndTenantKeyExists</a></span>&#8203;(<a href="../../database/utils/db2/Db2Adapter.html" title="class in com.ibm.fhir.database.utils.db2">Db2Adapter</a>&nbsp;adapter,
                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tenantName,
                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tenantKey)</code></th>
<td class="colLast">
<div class="block">checks if tenant name and tenant key exists.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configureConnectionPool()">configureConnectionPool</a></span>()</code></th>
<td class="colLast">
<div class="block">Create a simple connection pool associated with our data source so that we
 can perform the DDL deployment in parallel</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configureLogger()">configureLogger</a></span>()</code></th>
<td class="colLast">
<div class="block">Set up the logger using the log.dir system property</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configureLogger(java.lang.String)">configureLogger</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;logDir)</code></th>
<td class="colLast">
<div class="block">Configure the logger to use the given directory.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html?is-external=true" title="class or interface in java.sql" class="externalLink">Connection</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createConnection()">createConnection</a></span>()</code></th>
<td class="colLast">
<div class="block">Connect to the target database</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createFhirSchemas()">createFhirSchemas</a></span>()</code></th>
<td class="colLast">
<div class="block">Create fhir data and admin schema</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dropSchema()">dropSchema</a></span>()</code></th>
<td class="colLast">
<div class="block">Drop all the objects in the admin and data schemas.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dropTenant()">dropTenant</a></span>()</code></th>
<td class="colLast">
<div class="block">Deallocate this tenant, dropping all the related partitions</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExitStatus()">getExitStatus</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the program exit status from the environment</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#grantPrivileges(java.lang.String)">grantPrivileges</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;groupName)</code></th>
<td class="colLast">
<div class="block">Grant the minimum required set of privileges on the FHIR schema objects
 to the grantTo user.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadDriver()">loadDriver</a></span>()</code></th>
<td class="colLast">
<div class="block">Load the DB2 driver class</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadPropertyFile(java.lang.String)">loadPropertyFile</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filename)</code></th>
<td class="colLast">
<div class="block">Read the properties from the given file</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#logStatusMessage(int)">logStatusMessage</a></span>&#8203;(int&nbsp;status)</code></th>
<td class="colLast">
<div class="block">Write a final status message - useful for QA to review when checking the
 output</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#main(java.lang.String%5B%5D)">main</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</code></th>
<td class="colLast">
<div class="block">Main entry point</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseArgs(java.lang.String%5B%5D)">parseArgs</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</code></th>
<td class="colLast">
<div class="block">Parse the command-line arguments, building up the environment and
 establishing
 the run-list</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#populateResourceTypeAndParameterNameTableEntries(java.lang.Integer)">populateResourceTypeAndParameterNameTableEntries</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&nbsp;tenantId)</code></th>
<td class="colLast">
<div class="block">populates for the given tenantId the RESOURCE_TYPE table.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#printUsage()">printUsage</a></span>()</code></th>
<td class="colLast">
<div class="block">prints a brief menu to the standard out showing the usage.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#process()">process</a></span>()</code></th>
<td class="colLast">
<div class="block">Process the requested operation</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#testTenant()">testTenant</a></span>()</code></th>
<td class="colLast">
<div class="block">Check that we can call the set_tenant procedure successfully (which means
 that the
 tenant record exists in the tenants table)</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateProcedures()">updateProcedures</a></span>()</code></th>
<td class="colLast">
<div class="block">Update the stored procedures used by FHIR to insert records
 into the FHIR resource tables</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateSchema()">updateSchema</a></span>()</code></th>
<td class="colLast">
<div class="block">Update the schema</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="MULTITENANT_FEATURE_ENABLED">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MULTITENANT_FEATURE_ENABLED</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../model/DbType.html" title="enum in com.ibm.fhir.schema.model">DbType</a>&gt; MULTITENANT_FEATURE_ENABLED</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Main</h4>
<pre>public&nbsp;Main()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="parseArgs(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseArgs</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;parseArgs&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</pre>
<div class="block">Parse the command-line arguments, building up the environment and
 establishing
 the run-list</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - </dd>
</dl>
</li>
</ul>
<a id="loadPropertyFile(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadPropertyFile</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;loadPropertyFile&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;filename)</pre>
<div class="block">Read the properties from the given file</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - </dd>
</dl>
</li>
</ul>
<a id="addProperty(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addProperty</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addProperty&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pair)</pre>
<div class="block">Parse the given key=value string and add to the properties being collected</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pair</code> - </dd>
</dl>
</li>
</ul>
<a id="printUsage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printUsage</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;printUsage()</pre>
<div class="block">prints a brief menu to the standard out showing the usage.</div>
</li>
</ul>
<a id="configureLogger()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureLogger</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;configureLogger()</pre>
<div class="block">Set up the logger using the log.dir system property</div>
</li>
</ul>
<a id="configureLogger(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureLogger</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;configureLogger&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;logDir)</pre>
<div class="block">Configure the logger to use the given directory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>logDir</code> - </dd>
</dl>
</li>
</ul>
<a id="getExitStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExitStatus</h4>
<pre class="methodSignature">protected&nbsp;int&nbsp;getExitStatus()</pre>
<div class="block">Get the program exit status from the environment</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="logStatusMessage(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStatusMessage</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;logStatusMessage&#8203;(int&nbsp;status)</pre>
<div class="block">Write a final status message - useful for QA to review when checking the
 output</div>
</li>
</ul>
<a id="dropSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropSchema</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;dropSchema()</pre>
<div class="block">Drop all the objects in the admin and data schemas. Typically used
 during development.</div>
</li>
</ul>
<a id="updateSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateSchema</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;updateSchema()</pre>
<div class="block">Update the schema</div>
</li>
</ul>
<a id="createFhirSchemas()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFhirSchemas</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;createFhirSchemas()</pre>
<div class="block">Create fhir data and admin schema</div>
</li>
</ul>
<a id="updateProcedures()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateProcedures</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;updateProcedures()</pre>
<div class="block">Update the stored procedures used by FHIR to insert records
 into the FHIR resource tables</div>
</li>
</ul>
<a id="applyModel(com.ibm.fhir.database.utils.model.PhysicalDataModel,com.ibm.fhir.database.utils.api.IDatabaseAdapter,com.ibm.fhir.task.api.ITaskCollector,com.ibm.fhir.database.utils.version.VersionHistoryService)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyModel</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;applyModel&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in com.ibm.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm,
                          <a href="../../database/utils/api/IDatabaseAdapter.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseAdapter</a>&nbsp;adapter,
                          <a href="../../task/api/ITaskCollector.html" title="interface in com.ibm.fhir.task.api">ITaskCollector</a>&nbsp;collector,
                          <a href="../../database/utils/version/VersionHistoryService.html" title="class in com.ibm.fhir.database.utils.version">VersionHistoryService</a>&nbsp;vhs)</pre>
<div class="block">Start the schema object creation tasks and wait for everything to complete</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dd><code>adapter</code> - </dd>
<dd><code>collector</code> - </dd>
<dd><code>vhs</code> - </dd>
</dl>
</li>
</ul>
<a id="loadDriver()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadDriver</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;loadDriver()</pre>
<div class="block">Load the DB2 driver class</div>
</li>
</ul>
<a id="createConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createConnection</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html?is-external=true" title="class or interface in java.sql" class="externalLink">Connection</a>&nbsp;createConnection()</pre>
<div class="block">Connect to the target database</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="configureConnectionPool()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureConnectionPool</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;configureConnectionPool()</pre>
<div class="block">Create a simple connection pool associated with our data source so that we
 can perform the DDL deployment in parallel</div>
</li>
</ul>
<a id="process()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>process</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;process()</pre>
<div class="block">Process the requested operation</div>
</li>
</ul>
<a id="grantPrivileges(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>grantPrivileges</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;grantPrivileges&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;groupName)</pre>
<div class="block">Grant the minimum required set of privileges on the FHIR schema objects
 to the grantTo user. All tenant data access is via this user, and is the
 only user the FHIR server itself is configured with.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>groupName</code> - </dd>
</dl>
</li>
</ul>
<a id="addTenantKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTenantKey</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addTenantKey()</pre>
<div class="block">Add a new tenant key so that we can rotate the values (add a
 new key, update config files, then remove the old key). This
 avoids any service interruption.</div>
</li>
</ul>
<a id="checkIfTenantNameAndTenantKeyExists(com.ibm.fhir.database.utils.db2.Db2Adapter,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIfTenantNameAndTenantKeyExists</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;checkIfTenantNameAndTenantKeyExists&#8203;(<a href="../../database/utils/db2/Db2Adapter.html" title="class in com.ibm.fhir.database.utils.db2">Db2Adapter</a>&nbsp;adapter,
                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tenantName,
                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tenantKey)</pre>
<div class="block">checks if tenant name and tenant key exists.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>adapter</code> - the db2 adapter as this is a db2 feature only now</dd>
<dd><code>tenantName</code> - the tenant's name</dd>
<dd><code>tenantKey</code> - tenant key</dd>
</dl>
</li>
</ul>
<a id="allocateTenant()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocateTenant</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;allocateTenant()</pre>
<div class="block">Allocate this tenant, creating new partitions if required.</div>
</li>
</ul>
<a id="populateResourceTypeAndParameterNameTableEntries(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateResourceTypeAndParameterNameTableEntries</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;populateResourceTypeAndParameterNameTableEntries&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&nbsp;tenantId)</pre>
<div class="block">populates for the given tenantId the RESOURCE_TYPE table.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tenantId</code> - the mt_id that is used to setup the partition.
                 passing in null signals not multi-tenant.</dd>
</dl>
</li>
</ul>
<a id="testTenant()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testTenant</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;testTenant()</pre>
<div class="block">Check that we can call the set_tenant procedure successfully (which means
 that the
 tenant record exists in the tenants table)</div>
</li>
</ul>
<a id="dropTenant()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropTenant</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;dropTenant()</pre>
<div class="block">Deallocate this tenant, dropping all the related partitions</div>
</li>
</ul>
<a id="checkCompatibility()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCompatibility</h4>
<pre class="methodSignature">protected&nbsp;boolean&nbsp;checkCompatibility()</pre>
</li>
</ul>
<a id="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;main&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</pre>
<div class="block">Main entry point</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Main.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>IBM</span>&nbsp;FHIR®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../index.html?com/ibm/fhir/schema/app/Main.html" target="_top">Frames</a></li>
<li><a href="Main.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright 2019, 2020. <a href="http://www.ibm.com">IBM Corporation<a><br></br>FHIR&reg; is the registered trademark of HL7 and is used with the permission of HL7.</small></p>
</footer>
</body>
</html>