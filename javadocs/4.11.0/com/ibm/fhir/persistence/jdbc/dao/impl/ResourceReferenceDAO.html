<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.14.1) on Tue Apr 05 20:06:14 UTC 2022 -->
<title>ResourceReferenceDAO (IBM FHIR Server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-04-05">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ResourceReferenceDAO (IBM FHIR Server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":6,"i3":10,"i4":6,"i5":6,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":6,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ResourceReferenceDAO.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>IBM</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../index.html?com/ibm/fhir/persistence/jdbc/dao/impl/ResourceReferenceDAO.html" target="_top">Frames</a></li>
<li><a href="ResourceReferenceDAO.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.ibm.fhir.persistence.jdbc.dao.impl</a></div>
<h2 title="Class ResourceReferenceDAO" class="title">Class ResourceReferenceDAO</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.ibm.fhir.persistence.jdbc.dao.impl.ResourceReferenceDAO</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../../db2/Db2ResourceReferenceDAO.html" title="class in com.ibm.fhir.persistence.jdbc.db2">Db2ResourceReferenceDAO</a></code>, <code><a href="../../derby/DerbyResourceReferenceDAO.html" title="class in com.ibm.fhir.persistence.jdbc.derby">DerbyResourceReferenceDAO</a></code>, <code><a href="../../postgres/PostgresResourceReferenceDAO.html" title="class in com.ibm.fhir.persistence.jdbc.postgres">PostgresResourceReferenceDAO</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">ResourceReferenceDAO</span>
extends java.lang.Object
implements <a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a>, java.lang.AutoCloseable</pre>
<div class="block">DAO to handle maintenance of the local and external reference tables
 which contain the relationships described by "reference" elements in
 each resource (e.g. Observation.subject).

 The DAO uses a cache for looking up the ids for various entities. The
 DAO can create new entries, but these can only be used locally until
 the transaction commits, at which point they can be consolidated into
 the shared cache. This has the benefit that we reduce the number of times
 we need to lock the global cache, because we only update it once per
 transaction.

 For improved performance, we also make use of batch statements which
 are managed as member variables. This is why it's important to close
 this DAO before the transaction commits, ensuring that any outstanding
 DML batched but not yet executed is processed. Calling close does not
 close the provided Connection. That is up to the caller to manage.
 Close does close any statements which are opened inside the class.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#BATCH_SIZE">BATCH_SIZE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.ibm.fhir.database.utils.api.IDatabaseTranslator,java.sql.Connection,java.lang.String,com.ibm.fhir.persistence.jdbc.dao.api.ICommonTokenValuesCache,com.ibm.fhir.persistence.jdbc.dao.api.INameIdCache)">ResourceReferenceDAO</a></span>&#8203;(<a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseTranslator</a>&nbsp;t,
                    java.sql.Connection&nbsp;c,
                    java.lang.String&nbsp;schemaName,
                    <a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a>&nbsp;cache,
                    <a href="../api/INameIdCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">INameIdCache</a>&lt;java.lang.Integer&gt;&nbsp;parameterNameCache)</code></th>
<td class="colLast">
<div class="block">Public constructor</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addNormalizedValues(java.lang.String,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">addNormalizedValues</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                   java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs,
                   java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
                   java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
                   java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)</code></th>
<td class="colLast">
<div class="block">Add TOKEN_VALUE_MAP records, creating any CODE_SYSTEMS and COMMON_TOKEN_VALUES
 as necessary</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCanonicalValuesUpsert(java.lang.String,java.util.Collection)">doCanonicalValuesUpsert</a></span>&#8203;(java.lang.String&nbsp;paramList,
                       java.util.Collection&lt;java.lang.String&gt;&nbsp;sortedURLS)</code></th>
<td class="colLast">
<div class="block">Insert any missing values into the common_canonical_values table</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCodeSystemsFetch(java.util.Map,java.lang.String,java.util.List)">doCodeSystemsFetch</a></span>&#8203;(java.util.Map&lt;java.lang.String,&#8203;java.lang.Integer&gt;&nbsp;idMap,
                  java.lang.String&nbsp;inList,
                  java.util.List&lt;java.lang.String&gt;&nbsp;sortedSystemNames)</code></th>
<td class="colLast">
<div class="block">Fetch the code_system_id values for each of the code_system_name values in the sortedSystemNames list.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCodeSystemsUpsert(java.lang.String,java.util.Collection)">doCodeSystemsUpsert</a></span>&#8203;(java.lang.String&nbsp;paramList,
                   java.util.Collection&lt;java.lang.String&gt;&nbsp;sortedSystemNames)</code></th>
<td class="colLast">
<div class="block">Insert any missing values into the code_systems table</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCommonTokenValuesUpsert(java.lang.String,java.util.Collection)">doCommonTokenValuesUpsert</a></span>&#8203;(java.lang.String&nbsp;paramList,
                         java.util.Collection&lt;<a href="../../dto/CommonTokenValue.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValue</a>&gt;&nbsp;sortedTokenValues)</code></th>
<td class="colLast">
<div class="block">Execute the insert (upsert) into the common_token_values table for the
 given collection of values.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flush()">flush</a></span>()</code></th>
<td class="colLast">
<div class="block">Execute any statements with pending batch entries</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCache()">getCache</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the <a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api"><code>ICommonTokenValuesCache</code></a> held by this DAO</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected java.sql.Connection</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConnection()">getConnection</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the <code>Connection</code> held by this DAO</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getParameterNameId(java.lang.String)">getParameterNameId</a></span>&#8203;(java.lang.String&nbsp;parameterName)</code></th>
<td class="colLast">
<div class="block">Get the id from the local (tenant-specific) identity cache, or read/create using
 the database if needed.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getResourceReferenceCache()">getResourceReferenceCache</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the cache used by the DAO</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSchemaName()">getSchemaName</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for subclass access to the schemaName</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseTranslator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTranslator()">getTranslator</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the <a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api"><code>IDatabaseTranslator</code></a> held by this DAO</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertResourceProfiles(java.lang.String,java.util.Collection)">insertResourceProfiles</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                      java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profiles)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertResourceSecurity(java.lang.String,java.util.Collection)">insertResourceSecurity</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                      java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert _security parameters to the resource-specific xx_SECURITY table</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertResourceTags(java.lang.String,java.util.Collection)">insertResourceTags</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                  java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert the tags referenced by the given collection of token value records</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertResourceTokenRefs(java.lang.String,java.util.Collection)">insertResourceTokenRefs</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                       java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert the values in the resource-type-specific _resource_token_refs table.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertSystemResourceProfiles(java.lang.String,java.util.Collection)">insertSystemResourceProfiles</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                            java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profiles)</code></th>
<td class="colLast">
<div class="block">Insert PROFILE parameters</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertSystemResourceSecurity(java.lang.String,java.util.Collection)">insertSystemResourceSecurity</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                            java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert _security parametes to the whole-system LOGICAL_REOURCE_SECURITY table</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertSystemResourceTags(java.lang.String,java.util.Collection)">insertSystemResourceTags</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                        java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert _tag parameters to the whole-system LOGICAL_RESOURCE_TAGS table</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#insertSystemResourceTokenRefs(java.lang.String,java.util.Collection)">insertSystemResourceTokenRefs</a></span>&#8203;(java.lang.String&nbsp;resourceType,
                             java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</code></th>
<td class="colLast">
<div class="block">Insert any whole-system parameters to the token_refs table</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#persist(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">persist</a></span>&#8203;(java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;records,
       java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
       java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
       java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)</code></th>
<td class="colLast">
<div class="block">Persist the records, which may span multiple resource types</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readCanonicalId(java.lang.String)">readCanonicalId</a></span>&#8203;(java.lang.String&nbsp;canonicalValue)</code></th>
<td class="colLast">
<div class="block">Read the database canonical_id for the given value</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../dto/CommonTokenValueResult.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValueResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readCommonTokenValueId(java.lang.String,java.lang.String)">readCommonTokenValueId</a></span>&#8203;(java.lang.String&nbsp;codeSystem,
                      java.lang.String&nbsp;tokenValue)</code></th>
<td class="colLast">
<div class="block">Find the database id for the given token value and system</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readCommonTokenValueIdList(java.lang.String)">readCommonTokenValueIdList</a></span>&#8203;(java.lang.String&nbsp;tokenValue)</code></th>
<td class="colLast">
<div class="block">Fetch the list of matching common_token_value_id records for the given tokenValue.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;<a href="../../dto/CommonTokenValueResult.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValueResult</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readCommonTokenValueIds(java.util.Collection)">readCommonTokenValueIds</a></span>&#8203;(java.util.Collection&lt;<a href="../../dto/CommonTokenValue.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValue</a>&gt;&nbsp;tokenValues)</code></th>
<td class="colLast">
<div class="block">Find database ids for a set of common token values</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>protected abstract int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readOrAddParameterNameId(java.lang.String)">readOrAddParameterNameId</a></span>&#8203;(java.lang.String&nbsp;parameterName)</code></th>
<td class="colLast">
<div class="block">Fetch the id for the given parameter name from the database, creating a new entry if required.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#upsertCanonicalValues(java.util.List)">upsertCanonicalValues</a></span>&#8203;(java.util.List&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileValues)</code></th>
<td class="colLast">
<div class="block">Add the missing values to the database (and get ids allocated)</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#upsertCodeSystems(java.util.List)">upsertCodeSystems</a></span>&#8203;(java.util.List&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;systems)</code></th>
<td class="colLast">
<div class="block">Add all the systems we currently don't have in the database.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#upsertCommonTokenValues(java.util.List)">upsertCommonTokenValues</a></span>&#8203;(java.util.List&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;values)</code></th>
<td class="colLast">
<div class="block">Add reference value records for each unique reference name in the given list</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="BATCH_SIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BATCH_SIZE</h4>
<pre>protected static final&nbsp;int BATCH_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#com.ibm.fhir.persistence.jdbc.dao.impl.ResourceReferenceDAO.BATCH_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(com.ibm.fhir.database.utils.api.IDatabaseTranslator,java.sql.Connection,java.lang.String,com.ibm.fhir.persistence.jdbc.dao.api.ICommonTokenValuesCache,com.ibm.fhir.persistence.jdbc.dao.api.INameIdCache)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ResourceReferenceDAO</h4>
<pre>public&nbsp;ResourceReferenceDAO&#8203;(<a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseTranslator</a>&nbsp;t,
                            java.sql.Connection&nbsp;c,
                            java.lang.String&nbsp;schemaName,
                            <a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a>&nbsp;cache,
                            <a href="../api/INameIdCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">INameIdCache</a>&lt;java.lang.Integer&gt;&nbsp;parameterNameCache)</pre>
<div class="block">Public constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>c</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getTranslator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTranslator</h4>
<pre class="methodSignature">protected&nbsp;<a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api">IDatabaseTranslator</a>&nbsp;getTranslator()</pre>
<div class="block">Getter for the <a href="../../../../database/utils/api/IDatabaseTranslator.html" title="interface in com.ibm.fhir.database.utils.api"><code>IDatabaseTranslator</code></a> held by this DAO</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="getCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCache</h4>
<pre class="methodSignature">protected&nbsp;<a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a>&nbsp;getCache()</pre>
<div class="block">Getter for the <a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api"><code>ICommonTokenValuesCache</code></a> held by this DAO</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="getConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnection</h4>
<pre class="methodSignature">protected&nbsp;java.sql.Connection&nbsp;getConnection()</pre>
<div class="block">Getter for the <code>Connection</code> held by this DAO</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="getSchemaName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSchemaName</h4>
<pre class="methodSignature">protected&nbsp;java.lang.String&nbsp;getSchemaName()</pre>
<div class="block">Getter for subclass access to the schemaName</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="flush()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;flush()
           throws <a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#flush()">IResourceReferenceDAO</a></code></span></div>
<div class="block">Execute any statements with pending batch entries</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#flush()">flush</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws <a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="getResourceReferenceCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResourceReferenceCache</h4>
<pre class="methodSignature">public&nbsp;<a href="../api/ICommonTokenValuesCache.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">ICommonTokenValuesCache</a>&nbsp;getResourceReferenceCache()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#getResourceReferenceCache()">IResourceReferenceDAO</a></code></span></div>
<div class="block">Get the cache used by the DAO</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#getResourceReferenceCache()">getResourceReferenceCache</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="readCommonTokenValueId(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCommonTokenValueId</h4>
<pre class="methodSignature">public&nbsp;<a href="../../dto/CommonTokenValueResult.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValueResult</a>&nbsp;readCommonTokenValueId&#8203;(java.lang.String&nbsp;codeSystem,
                                                     java.lang.String&nbsp;tokenValue)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueId(java.lang.String,java.lang.String)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Find the database id for the given token value and system</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueId(java.lang.String,java.lang.String)">readCommonTokenValueId</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the matching id from common_token_values.common_token_value_id or null if not found</dd>
</dl>
</li>
</ul>
<a id="readCommonTokenValueIds(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCommonTokenValueIds</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;<a href="../../dto/CommonTokenValueResult.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValueResult</a>&gt;&nbsp;readCommonTokenValueIds&#8203;(java.util.Collection&lt;<a href="../../dto/CommonTokenValue.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValue</a>&gt;&nbsp;tokenValues)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueIds(java.util.Collection)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Find database ids for a set of common token values</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueIds(java.util.Collection)">readCommonTokenValueIds</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a non-null, possibly-empty set of ids from common_token_values.common_token_value_id;
      CommonTokenValues with no corresponding record will be omitted from the set</dd>
</dl>
</li>
</ul>
<a id="readCanonicalId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCanonicalId</h4>
<pre class="methodSignature">public&nbsp;java.lang.Integer&nbsp;readCanonicalId&#8203;(java.lang.String&nbsp;canonicalValue)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#readCanonicalId(java.lang.String)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Read the database canonical_id for the given value</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#readCanonicalId(java.lang.String)">readCanonicalId</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="addNormalizedValues(java.lang.String,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNormalizedValues</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addNormalizedValues&#8203;(java.lang.String&nbsp;resourceType,
                                java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs,
                                java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
                                java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
                                java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)
                         throws <a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#addNormalizedValues(java.lang.String,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Add TOKEN_VALUE_MAP records, creating any CODE_SYSTEMS and COMMON_TOKEN_VALUES
 as necessary</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#addNormalizedValues(java.lang.String,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">addNormalizedValues</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="insertResourceTokenRefs(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertResourceTokenRefs</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertResourceTokenRefs&#8203;(java.lang.String&nbsp;resourceType,
                                       java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert the values in the resource-type-specific _resource_token_refs table. This
 is a simple batch insert because all the FKs have already been resolved and updated
 in the ResourceTokenValueRec records</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="insertSystemResourceTokenRefs(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertSystemResourceTokenRefs</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertSystemResourceTokenRefs&#8203;(java.lang.String&nbsp;resourceType,
                                             java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert any whole-system parameters to the token_refs table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="upsertCodeSystems(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upsertCodeSystems</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;upsertCodeSystems&#8203;(java.util.List&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;systems)</pre>
<div class="block">Add all the systems we currently don't have in the database. If all target
 databases handled MERGE properly this would be easy, but they don't so
 we go old-school with a negative outer join instead (which is pretty much
 what MERGE does behind the scenes anyway).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>systems</code> - </dd>
</dl>
</li>
</ul>
<a id="doCodeSystemsFetch(java.util.Map,java.lang.String,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCodeSystemsFetch</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;doCodeSystemsFetch&#8203;(java.util.Map&lt;java.lang.String,&#8203;java.lang.Integer&gt;&nbsp;idMap,
                                  java.lang.String&nbsp;inList,
                                  java.util.List&lt;java.lang.String&gt;&nbsp;sortedSystemNames)</pre>
<div class="block">Fetch the code_system_id values for each of the code_system_name values in the sortedSystemNames list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>idMap</code> - the code_system_name -> code_system_id map to populate</dd>
<dd><code>inList</code> - a list of bind markers for the values in the sortedSystemNames list</dd>
<dd><code>sortedSystemNames</code> - the list of code_system_name values to fetch</dd>
</dl>
</li>
</ul>
<a id="upsertCanonicalValues(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upsertCanonicalValues</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;upsertCanonicalValues&#8203;(java.util.List&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileValues)</pre>
<div class="block">Add the missing values to the database (and get ids allocated)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>profileValues</code> - </dd>
</dl>
</li>
</ul>
<a id="insertResourceProfiles(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertResourceProfiles</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertResourceProfiles&#8203;(java.lang.String&nbsp;resourceType,
                                      java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profiles)</pre>
</li>
</ul>
<a id="insertSystemResourceProfiles(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertSystemResourceProfiles</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertSystemResourceProfiles&#8203;(java.lang.String&nbsp;resourceType,
                                            java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profiles)</pre>
<div class="block">Insert PROFILE parameters</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>profiles</code> - </dd>
</dl>
</li>
</ul>
<a id="insertResourceTags(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertResourceTags</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertResourceTags&#8203;(java.lang.String&nbsp;resourceType,
                                  java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert the tags referenced by the given collection of token value records</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="insertSystemResourceTags(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertSystemResourceTags</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertSystemResourceTags&#8203;(java.lang.String&nbsp;resourceType,
                                        java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert _tag parameters to the whole-system LOGICAL_RESOURCE_TAGS table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="insertResourceSecurity(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertResourceSecurity</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertResourceSecurity&#8203;(java.lang.String&nbsp;resourceType,
                                      java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert _security parameters to the resource-specific xx_SECURITY table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="insertSystemResourceSecurity(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertSystemResourceSecurity</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;insertSystemResourceSecurity&#8203;(java.lang.String&nbsp;resourceType,
                                            java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;xrefs)</pre>
<div class="block">Insert _security parametes to the whole-system LOGICAL_REOURCE_SECURITY table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - </dd>
<dd><code>xrefs</code> - </dd>
</dl>
</li>
</ul>
<a id="doCodeSystemsUpsert(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCodeSystemsUpsert</h4>
<pre class="methodSignature">public abstract&nbsp;void&nbsp;doCodeSystemsUpsert&#8203;(java.lang.String&nbsp;paramList,
                                         java.util.Collection&lt;java.lang.String&gt;&nbsp;sortedSystemNames)</pre>
<div class="block">Insert any missing values into the code_systems table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paramList</code> - </dd>
<dd><code>systemNames</code> - a sorted collection of system names</dd>
</dl>
</li>
</ul>
<a id="doCanonicalValuesUpsert(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCanonicalValuesUpsert</h4>
<pre class="methodSignature">public abstract&nbsp;void&nbsp;doCanonicalValuesUpsert&#8203;(java.lang.String&nbsp;paramList,
                                             java.util.Collection&lt;java.lang.String&gt;&nbsp;sortedURLS)</pre>
<div class="block">Insert any missing values into the common_canonical_values table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paramList</code> - </dd>
<dd><code>urls</code> - </dd>
</dl>
</li>
</ul>
<a id="upsertCommonTokenValues(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upsertCommonTokenValues</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;upsertCommonTokenValues&#8203;(java.util.List&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;values)</pre>
<div class="block">Add reference value records for each unique reference name in the given list</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>values</code> - </dd>
</dl>
</li>
</ul>
<a id="doCommonTokenValuesUpsert(java.lang.String,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCommonTokenValuesUpsert</h4>
<pre class="methodSignature">protected abstract&nbsp;void&nbsp;doCommonTokenValuesUpsert&#8203;(java.lang.String&nbsp;paramList,
                                                  java.util.Collection&lt;<a href="../../dto/CommonTokenValue.html" title="class in com.ibm.fhir.persistence.jdbc.dto">CommonTokenValue</a>&gt;&nbsp;sortedTokenValues)</pre>
<div class="block">Execute the insert (upsert) into the common_token_values table for the
 given collection of values. Note, this insert from negative outer join
 requires the database concurrency implementation to be correct. This does
 not work for Postgres, hence Postgres gets its own implementation of this
 method</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paramList</code> - </dd>
<dd><code>tokenValues</code> - </dd>
</dl>
</li>
</ul>
<a id="persist(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persist</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;persist&#8203;(java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;records,
                    java.util.Collection&lt;<a href="ResourceProfileRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
                    java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
                    java.util.Collection&lt;<a href="ResourceTokenValueRec.html" title="class in com.ibm.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)
             throws <a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#persist(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Persist the records, which may span multiple resource types</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#persist(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">persist</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRPersistenceException.html" title="class in com.ibm.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="readCommonTokenValueIdList(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCommonTokenValueIdList</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;java.lang.Long&gt;&nbsp;readCommonTokenValueIdList&#8203;(java.lang.String&nbsp;tokenValue)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueIdList(java.lang.String)">IResourceReferenceDAO</a></code></span></div>
<div class="block">Fetch the list of matching common_token_value_id records for the given tokenValue.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/IResourceReferenceDAO.html#readCommonTokenValueIdList(java.lang.String)">readCommonTokenValueIdList</a></code>&nbsp;in interface&nbsp;<code><a href="../api/IResourceReferenceDAO.html" title="interface in com.ibm.fhir.persistence.jdbc.dao.api">IResourceReferenceDAO</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="getParameterNameId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParameterNameId</h4>
<pre class="methodSignature">protected&nbsp;int&nbsp;getParameterNameId&#8203;(java.lang.String&nbsp;parameterName)
                          throws <a href="../../exception/FHIRPersistenceDBConnectException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a>,
                                 <a href="../../exception/FHIRPersistenceDataAccessException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDataAccessException</a></pre>
<div class="block">Get the id from the local (tenant-specific) identity cache, or read/create using
 the database if needed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>parameterName</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceDBConnectException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a></code></dd>
<dd><code><a href="../../exception/FHIRPersistenceDataAccessException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDataAccessException</a></code></dd>
</dl>
</li>
</ul>
<a id="readOrAddParameterNameId(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>readOrAddParameterNameId</h4>
<pre class="methodSignature">protected abstract&nbsp;int&nbsp;readOrAddParameterNameId&#8203;(java.lang.String&nbsp;parameterName)
                                         throws <a href="../../exception/FHIRPersistenceDBConnectException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a>,
                                                <a href="../../exception/FHIRPersistenceDataAccessException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDataAccessException</a></pre>
<div class="block">Fetch the id for the given parameter name from the database, creating a new entry if required.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>parameterName</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceDBConnectException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a></code></dd>
<dd><code><a href="../../exception/FHIRPersistenceDataAccessException.html" title="class in com.ibm.fhir.persistence.jdbc.exception">FHIRPersistenceDataAccessException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ResourceReferenceDAO.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>IBM</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../index.html?com/ibm/fhir/persistence/jdbc/dao/impl/ResourceReferenceDAO.html" target="_top">Frames</a></li>
<li><a href="ResourceReferenceDAO.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright 2019, 2022. <a href="http://www.ibm.com">IBM Corporation<a><br></br>FHIR&reg; is the registered trademark of HL7 and is used with the permission of HL7.</small></p>
</footer>
</body>
</html>
