{"version":3,"sources":["webpack:///./src/pages/blog/everything.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-blog-everything-md-0f1f70a28d8c4be0088f.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/FHIR/FHIR/fhir/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`By Paul Bastide    |    Published April 4, 2021`}</p>\n    <h1>{`The $everything operation`}</h1>\n    <p>{`In `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/LinuxForHealth/FHIR/releases/tag/4.7.0\"\n      }}>{`IBM FHIR Server 4.7.0`}</a>{`, the IBM FHIR Server team turned on the `}<inlineCode parentName=\"p\">{`Patient/$everything`}</inlineCode>{` operation. We have this feature thanks to external contributor and an IBMer, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/luisgarcc\"\n      }}>{`Luis García`}</a>{` who implemented the operation in `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/LinuxForHealth/FHIR/issues/1044\"\n      }}>{`#1044`}</a>{`.`}</p>\n    <p>{`So what do you get with `}<inlineCode parentName=\"p\">{`Patient/$everything`}</inlineCode>{`? Well, following the HL7 FHIR R4 `}<a parentName=\"p\" {...{\n        \"href\": \"http://hl7.org/fhir/patient-operation-everything.html\"\n      }}>{`specification`}</a>{`, you get an operation that returns a “searchset” bundle with the information related to a patient in the context it is invoked. In the IBM FHIR Server’s case, the server returns whatever resources are related to the Patient - e.g. practitioners, medications, locations, organizations etc.  You also get support for `}<inlineCode parentName=\"p\">{`Patient/[id]/$everything`}</inlineCode>{` where the `}<inlineCode parentName=\"p\">{`[ID]`}</inlineCode>{` is the logical id specific to a patient.`}</p>\n    <p>{`Let’s build a request and see it in action:`}</p>\n    <p>{`We need to know about the parameters of the `}<inlineCode parentName=\"p\">{`$everything`}</inlineCode>{` operation.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`start`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`date`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The date range relates to care dates, not record currency dates - e.g. all records relating to care provided in a certain date range. If no start date is provided, all records prior to the end date are in scope.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`end`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`date`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The date range relates to care dates, not record currency dates - e.g. all records relating to care provided in a certain date range. If no end date is provided, all records subsequent to the start date are in scope.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`_since`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`date`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Resources updated after this period will be included in the response. The intent of this parameter is to allow a client to request only records that have changed since the last request, based on either the return header time, or or (for asynchronous use), the transaction time`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`_type`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`code`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`One or more parameters, each containing one or more comma-delimited FHIR resource types to include in the return resources. In the absence of any specified types, the server returns all resource types`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`return`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Bundle`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The bundle is “searchset”`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Note, currently the implementation ignores the `}<inlineCode parentName=\"p\">{`_count`}</inlineCode>{` parameter.`}</p>\n    <p>{`Now, let’s prepopulate some sample data on the server using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/LinuxForHealth/FHIR/blob/main/fhir-server-test/src/test/resources/testdata/everything-operation/Antonia30_Acosta403.json\"\n      }}>{`Integration Test data`}</a>{`.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Download the Sample Data`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\"\n      }}>{`curl -L https://raw.githubusercontent.com/IBM/FHIR/main/fhir-server-test/src/test/resources/testdata/everything-operation/Antonia30_Acosta403.json -o Antonia30_Acosta403.json\n`}</code></pre>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Load the Sample Data bundle to the IBM FHIR Server`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\"\n      }}>{`curl -k --location --request POST 'https://localhost:9443/fhir-server/api/v4' \\\\\n    --header 'Content-Type: application/fhir+json' \\\\\n    --user \"fhiruser:\\${DUMMY_PASSWORD}\" \\\\\n    --data-binary  \"@Antonia30_Acosta403.json\" -o response.json\n`}</code></pre>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Scan the response.json for any status that is not `}<inlineCode parentName=\"p\">{`\"status\": \"201\"`}</inlineCode>{`.  For example, the status is in the family of User Request Error or Server Side Error.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Check the `}<inlineCode parentName=\"p\">{`response.json`}</inlineCode>{` and find the id for Patient (it should be the first one).`}</p>\n      </li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`        {\n            \"response\": {\n                \"id\": \"178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\",\n                \"status\": \"201\",\n                \"location\": \"Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/_history/1\",\n                \"etag\": \"W/\\\\\"1\\\\\"\",\n                \"lastModified\": \"2021-04-21T13:34:50.207684Z\"\n            }\n        },\n`}</code></pre>\n    <ol {...{\n      \"start\": 5\n    }}>\n      <li parentName=\"ol\">{`Check the `}<inlineCode parentName=\"li\">{`Patient/[id]/$everything`}</inlineCode></li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Request *`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\"\n      }}>{`curl -k --location --request GET 'https://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/$everything' \\\\\n    --header 'Content-Type: application/fhir+json' \\\\\n    --user \"fhiruser:\\${DUMMY_PASSWORD}\" \\\\\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Response *`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"resourceType\": \"Bundle\",\n    \"id\": \"689856f9-6ef6-4d74-8f77-a813ff7b1c6d\",\n    \"type\": \"searchset\",\n    \"total\": 895,\n    \"entry\": [\n        {\n            \"fullUrl\": \"https://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\",\n                \"meta\": {\n                    \"versionId\": \"1\",\n                    \"lastUpdated\": \"2021-04-21T13:34:50.207684Z\"\n                }\n                ...\n            }\n        }\n    ]\n}\n`}</code></pre>\n    <ol {...{\n      \"start\": 6\n    }}>\n      <li parentName=\"ol\">{`Check the `}<inlineCode parentName=\"li\">{`Patient/[id]/$everything`}</inlineCode>{` with a _type constraint and _since.`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Request *`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\"\n      }}>{`curl -k --location --request GET 'https://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/$everything?_type=CarePlan,CareTeam&_since=2021-01-01T00:00:00Z&_count=1' \\\\\n    --header 'Content-Type: application/fhir+json' \\\\\n    --user \"fhiruser:\\${DUMMY_PASSWORD}\" -o care.json\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Response *`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"resourceType\": \"Bundle\",\n    \"id\": \"689856f9-6ef6-4d74-8f77-a813ff7b1c6d\",\n    \"type\": \"searchset\",\n    \"total\": 11,\n    \"entry\": [\n        {\n            \"fullUrl\": \"https://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\",\n                \"meta\": {\n                    \"versionId\": \"1\",\n                    \"lastUpdated\": \"2021-04-21T13:34:50.207684Z\"\n                }\n                ...\n            }\n        }\n    ]\n}\n`}</code></pre>\n    <p>{`You’ll see further down CareTeam and CarePlan resources…`}</p>\n    <ol {...{\n      \"start\": 7\n    }}>\n      <li parentName=\"ol\">{`This is where we can have a bit of fun…  download the `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/LinuxForHealth/FHIR/releases/download/4.7.0/fhir-path-4.7.0-cli.jar\"\n        }}>{`fhir-path-cli`}</a></li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\"\n      }}>{`curl -L https://github.com/LinuxForHealth/FHIR/releases/download/4.7.0/fhir-path-4.7.0-cli.jar -o fhir-path-4.7.0-cli.jar\n`}</code></pre>\n    <ol {...{\n      \"start\": 8\n    }}>\n      <li parentName=\"ol\">{`Let’s run the fhir-path-4.7.0-cli.jar and test a FHIRPath.`}</li>\n    </ol>\n    <p><em parentName=\"p\">{`Command Line`}</em></p>\n    <pre><code parentName=\"pre\" {...{}}>{`java -jar fhir-path-4.7.0-cli.jar --path 'entry.fullUrl' --file care.json\n`}</code></pre>\n    <p><em parentName=\"p\">{`Output`}</em></p>\n    <pre><code parentName=\"pre\" {...{}}>{`https://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CarePlan/178f4a3f86a-1a9a1d73-4d1d-46d5-8494-339dddbfe9d2\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CarePlan/178f4a3f86b-06c07a6c-3be7-4e6a-abb2-040ff67c8c1f\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CarePlan/178f4a3f873-d8069835-938e-45b1-9a70-5aba3794f6f3\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CarePlan/178f4a3f87c-ce204596-8037-416c-b2e0-fc7442d9a276\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CarePlan/178f4a3f87c-46785bc7-807a-40e0-bc08-792977ac8ec8\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CareTeam/178f4a3f86a-b79251c3-5019-426e-8211-748adbdfdf54\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CareTeam/178f4a3f86b-22a7baab-77b3-4fb5-b318-9249ea80ec85\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CareTeam/178f4a3f873-e370fba2-f45e-4cdd-b13b-781e249f84f8\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CareTeam/178f4a3f87c-596d80cc-7b42-4054-bc02-a48acfcc95b7\nhttps://localhost:9443/fhir-server/api/v4/Patient/178f4a3f869-6abfe1e6-3a4a-4c9a-81a8-fb8c6263e003/CareTeam/178f4a3f87c-6cc197cd-b665-46e0-ad35-c016edeaf13b\n`}</code></pre>\n    <p>{`You’ve seen a brief introduction to fhir-operation-everything and a bonus fhir-path-cli showing the output.`}</p>\n    <p>{`Note, `}<inlineCode parentName=\"p\">{`DUMMY_PASSWORD`}</inlineCode>{` should be replaced with or set as a value when the corresponding curl steps are executed.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}