(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{363:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",function(){return l}),a.d(t,"default",function(){return p});a(10),a(7),a(8),a(5),a(9),a(0);var n=a(107),r=a(395);a(2);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var l={},b={_frontmatter:l},o=r.a;function p(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["components"]);return Object(n.b)(o,i({},b,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",null,"Conformance to the HL7 FHIR Specification"),Object(n.b)("p",null,"The IBM FHIR Server aims to be a conformant implementation of the HL7 FHIR specification, version 4.0.1 (R4). However, the FHIR specification is very broad and not all implementations are expected to implement every feature. We prioritize performance and configurability over spec coverage."),Object(n.b)("h2",null,"Capability statement"),Object(n.b)("p",null,"The HL7 FHIR specification defines ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/http.html#capabilities"}),"an interaction")," for retrieving a machine-readable description of the server’s capabilities via the ",Object(n.b)("inlineCode",{parentName:"p"},"[base]/metadata")," endpoint. The IBM FHIR Server implements this interaction and generates a ",Object(n.b)("inlineCode",{parentName:"p"},"CapabilityStatement")," resource based on the current server configuration. While the ",Object(n.b)("inlineCode",{parentName:"p"},"CapabilityStatement")," resource is ideal for certain uses, this markdown document provides a human-readable summary of important details, with a special focus on limitations of the current implementation and deviations from the specification."),Object(n.b)("p",null,"The IBM FHIR Server supports only version 4.0.1 of the specification and ignores the optional MIME-type parameter ",Object(n.b)("inlineCode",{parentName:"p"},"fhirVersion"),"."),Object(n.b)("h2",null,"FHIR HTTP API"),Object(n.b)("p",null,"The HL7 FHIR specification is more than just a data format. It defines an ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/http.html"}),"HTTP API")," for creating, reading, updating, deleting, and searching over FHIR resources. The IBM FHIR Server implements almost the full API for every resource defined in the specification, with the following exceptions:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"history is only supported at the resource instance level (no resource type history and no whole-system history)"),Object(n.b)("li",{parentName:"ul"},"there are parts of the FHIR search specification which are not fully implemented as documented in the following section")),Object(n.b)("p",null,"The IBM FHIR Server implements a linear versioning scheme for resources and fully implements the ",Object(n.b)("inlineCode",{parentName:"p"},"vread")," and ",Object(n.b)("inlineCode",{parentName:"p"},"history")," interactions, as well as version-aware updates."),Object(n.b)("h3",null,"Extended operations"),Object(n.b)("p",null,"The HL7 FHIR specification also defines a mechanism for extending the base API with ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/operations.html"}),"extended operations"),".\nThe IBM FHIR Server implements a handful of extended operations and provides extension points for users to extend the server with their own."),Object(n.b)("p",null,"Operations are invoked via HTTP POST."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"All operations can be invoked by passing a Parameters resource instance in the body of the request."),Object(n.b)("li",{parentName:"ul"},"For operations with no input parameters, no body is required."),Object(n.b)("li",{parentName:"ul"},"For operations with a single input parameter named “resource”, the Parameters wrapper can be omitted.")),Object(n.b)("p",null,"Alternatively, for operations with only simple input parameters (i.e. no complex datatypes like ‘Identifier’ or ‘Reference’), operations can be invoked via HTTP GET by passing the parameters in the URL."),Object(n.b)("h4",null,"System operations"),Object(n.b)("p",null,"System operations are invoked at ",Object(n.b)("inlineCode",{parentName:"p"},"[base]/$[operation]")),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",i({parentName:"tr"},{align:null}),"Operation"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Short Description"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Notes"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/resource-operation-convert.html"}),"$convert")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Takes a resource in one form and returns it in another"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Converts between JSON and XML but ",Object(n.b)("em",{parentName:"td"},"not")," between FHIR versions")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html"}),"$export")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Export data from the server"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"exports to an S3-compatible data store; see the ",Object(n.b)("a",i({parentName:"td"},{href:"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#4101-bulk-data-export"}),"user guide")," for config info")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://github.com/smart-on-fhir/bulk-import/blob/master/import.md"}),"$import")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Import FHIR Resources from a source"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"see the ",Object(n.b)("a",i({parentName:"td"},{href:"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#4101-bulk-data-export"}),"user guide")," for config info. This implementation is based on the proposed operation.")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://github.com/IBM/FHIR/blob/master/fhir-operation-healthcheck/src/main/resources/healthcheck.json"}),"$healthcheck")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Check the health of the server"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Checks for a valid connection to the database")))),Object(n.b)("h4",null,"Type operations"),Object(n.b)("p",null,"Type operations are invoked at ",Object(n.b)("inlineCode",{parentName:"p"},"[base]/[resourceType]/$[operation]")),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",i({parentName:"tr"},{align:null}),"Operation"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Type"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Short Description"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Notes"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-resource-validate.html"}),"$validate")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"*"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Validate a passed resource instance"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Uses fhir-validate")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/uv/bulkdata/OperationDefinition-patient-export.html"}),"$export")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Patient"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Obtain a set of resources pertaining to all patients"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"exports to an S3-compatible data store; see the ",Object(n.b)("a",i({parentName:"td"},{href:"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#4101-bulk-data-export"}),"user guide")," for config info")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-composition-document.html"}),"$document")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Composition"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Generate a document"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Prototype-level implementation")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-plandefinition-apply.html"}),"$apply")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"PlanDefinition"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Applies a PlanDefinition to a given context"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"A prototype implementation that performs naive conversion")))),Object(n.b)("h4",null,"Instance operations"),Object(n.b)("p",null,"Instance operations are invoked at ",Object(n.b)("inlineCode",{parentName:"p"},"[base]/[resourceType]/[id]/$[operation]")),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",i({parentName:"tr"},{align:null}),"Operation"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Type"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Short Description"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Notes"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-resource-validate.html"}),"$validate")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"*"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Validate a resource instance"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Uses fhir-validate")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/uv/bulkdata/OperationDefinition-group-export.html"}),"$export")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Group"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Obtain a set resources pertaining to patients in a specific Group"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Only supports static membership; does not resolve inclusion/exclusion criteria")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-composition-document.html"}),"$document")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Composition"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Generate a document"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Prototype-level implementation")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("a",i({parentName:"td"},{href:"https://hl7.org/fhir/R4/operation-plandefinition-apply.html"}),"$apply")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"PlanDefinition"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"Applies a PlanDefinition to a given context"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"A prototype implementation that performs naive conversion")))),Object(n.b)("h3",null,"HTTP Headers"),Object(n.b)("p",null,"In addition to the content negotiation headers required in the FHIR specification, the IBM FHIR Server supports two client preferences via the ",Object(n.b)("inlineCode",{parentName:"p"},"Prefer")," header:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",i({parentName:"li"},{href:"https://www.hl7.org/fhir/http.html#ops"}),"return preference")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",i({parentName:"li"},{href:"https://www.hl7.org/fhir/search.html#errors"}),"handling preference"))),Object(n.b)("p",null,"The default return preference is ",Object(n.b)("inlineCode",{parentName:"p"},"minimal"),".\nThe default handling preference is configurable via the server’s ",Object(n.b)("inlineCode",{parentName:"p"},"fhirServer/core/defaultHandling")," config property, but defaults to ",Object(n.b)("inlineCode",{parentName:"p"},"strict"),".\nAdditionally, server administrators can configure whether or not to honor the client’s handling preference by setting ",Object(n.b)("inlineCode",{parentName:"p"},"fhirServer/core/allowClientHandlingPref")," which defaults to ",Object(n.b)("inlineCode",{parentName:"p"},"true"),".\nFor example, to ask the server to be lenient in processing a given request, but to return warnings for non-fatal errors, a client should set the Prefer header as follows:"),Object(n.b)("pre",null,Object(n.b)("code",i({parentName:"pre"},{}),"Prefer: return=OperationOutcome; handling=lenient\n")),Object(n.b)("p",null,"In ",Object(n.b)("inlineCode",{parentName:"p"},"lenient")," mode, the client must ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/search.html#conformance"}),"check the self uri")," of a search response to determine which parameters were used in computing the response."),Object(n.b)("p",null,"Note: In addition to controlling whether or not the server returns an error for unexpected search parameters, the handling preference is also used to control whether or not the server will return an error for unexpected elements in the JSON representation of a Resource as defined at ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/json.html"}),"https://www.hl7.org/fhir/json.html"),"."),Object(n.b)("p",null,"Finally, the IBM FHIR Server supports multi-tenancy through custom headers as defined at ",Object(n.b)("a",i({parentName:"p"},{href:"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#49-multi-tenancy"}),"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#49-multi-tenancy"),". By default, the server will look for a tenantId in a ",Object(n.b)("inlineCode",{parentName:"p"},"X-FHIR-TENANT-ID")," header and a datastoreId in the ",Object(n.b)("inlineCode",{parentName:"p"},"X-FHIR-DSID")," header, and use ",Object(n.b)("inlineCode",{parentName:"p"},"default")," for either one if the headers are not present."),Object(n.b)("h3",null,"General parameters"),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},"_format")," parameter is supported and provides a useful mechanism for requesting a specific format (",Object(n.b)("inlineCode",{parentName:"p"},"XML")," or ",Object(n.b)("inlineCode",{parentName:"p"},"JSON"),") in requests made from a browser. In the absence of either an ",Object(n.b)("inlineCode",{parentName:"p"},"Accept")," header or a ",Object(n.b)("inlineCode",{parentName:"p"},"_format")," query parameter, the server defaults to ",Object(n.b)("inlineCode",{parentName:"p"},"application/fhir+json"),"."),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},"_pretty")," parameter is also supported."),Object(n.b)("h2",null,"Search"),Object(n.b)("p",null,"The IBM FHIR Server supports all search parameter types defined in the specification:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Number")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Date/DateTime")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"String")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Token")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Reference")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Composite")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Quantity")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"URI")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"Special")," (Location-near)")),Object(n.b)("h3",null,"Search parameters"),Object(n.b)("p",null,"Search parameters defined in the specification can be found by browsing the R4 FHIR specification by resource type. For example, to find the search parameters for the Patient resource, navigate to ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/patient.html"}),"https://www.hl7.org/fhir/R4/patient.html")," and scroll to the Search Parameters section near the end of the page."),Object(n.b)("p",null,"In addition, the following search parameters are supported on all resources:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_id")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_lastUpdated")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_tag")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_profile")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_security")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_source")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_type"))),Object(n.b)("p",null,"These parameters can be used while searching any single resource type or while searching across resource types (whole system search).\nThe ",Object(n.b)("inlineCode",{parentName:"p"},"_type")," parameter is special in that it is only applicable for whole system search."),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},"_text"),", ",Object(n.b)("inlineCode",{parentName:"p"},"_content"),", ",Object(n.b)("inlineCode",{parentName:"p"},"_list"),", ",Object(n.b)("inlineCode",{parentName:"p"},"_has"),", ",Object(n.b)("inlineCode",{parentName:"p"},"_query"),", and ",Object(n.b)("inlineCode",{parentName:"p"},"_filter")," parameters are not supported at this time."),Object(n.b)("p",null,"Finally, the specification defines a set of “Search result parameters” for controlling the search behavior. The IBM FHIR Server supports the following:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_sort")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_count")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_include")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_revinclude")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_summary")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"_elements"))),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},"_count")," parameter can be used to request up to 1000 records matching the search criteria.  An attempt to exceed this ",Object(n.b)("inlineCode",{parentName:"p"},"_count")," limit will not be honored and returned records will be capped at 1000.  Any associated ",Object(n.b)("inlineCode",{parentName:"p"},"_include")," records are not considered in the ",Object(n.b)("inlineCode",{parentName:"p"},"_count")," limit. "),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},":iterate")," modifier is not supported for the ",Object(n.b)("inlineCode",{parentName:"p"},"_include")," parameter (or any other)."),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},"_total"),", ",Object(n.b)("inlineCode",{parentName:"p"},"_contained"),", and ",Object(n.b)("inlineCode",{parentName:"p"},"_containedType")," parameters are not supported at this time."),Object(n.b)("h3",null,"Custom search parameters"),Object(n.b)("p",null,"Custom search parameters are search parameters that are not defined in the FHIR R4 specification, but are configured for search on the IBM FHIR Server. You can configure custom parameters for either extension elements or for elements that are defined in the specification but without a corresponding search parameter."),Object(n.b)("p",null,"For information on how to specify custom search parameters, see ",Object(n.b)("a",i({parentName:"p"},{href:"https://ibm.github.io/FHIR/guides/FHIRSearchConfiguration"}),"FHIRSearchConfiguration.md"),"."),Object(n.b)("h3",null,"Search modifiers"),Object(n.b)("p",null,"FHIR search modifiers are described at ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/search.html#modifiers"}),"https://www.hl7.org/fhir/R4/search.html#modifiers")," and vary by search parameter type. The IBM FHIR Server implements a subset of the spec-defined search modifiers that is defined in the following table:"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",i({parentName:"tr"},{align:null}),"FHIR Search Parameter Type"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Supported Modifiers"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"“Default” search behavior when no Modifier or Prefix is present"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"String"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":exact"),",",Object(n.b)("inlineCode",{parentName:"td"},":contains"),",",Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"“starts with” search that is case-insensitive and accent-insensitive")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Reference"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":[type]"),",",Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"exact match search")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"URI"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":below"),",",Object(n.b)("inlineCode",{parentName:"td"},":above"),",",Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"exact match search")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Token"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"exact match search")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Number"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"implicit range search (see ",Object(n.b)("a",i({parentName:"td"},{href:"http://hl7.org/fhir/R4/search.html#number"}),"http://hl7.org/fhir/R4/search.html#number"),")")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Date"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"implicit range search (see ",Object(n.b)("a",i({parentName:"td"},{href:"https://www.hl7.org/fhir/search.html#date"}),"https://www.hl7.org/fhir/search.html#date"),")")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Quantity"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"implicit range search (see ",Object(n.b)("a",i({parentName:"td"},{href:"http://hl7.org/fhir/R4/search.html#quantity"}),"http://hl7.org/fhir/R4/search.html#quantity"),")")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Composite"),Object(n.b)("td",i({parentName:"tr"},{align:null}),Object(n.b)("inlineCode",{parentName:"td"},":missing")),Object(n.b)("td",i({parentName:"tr"},{align:null}),"processes each parameter component according to its type")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"Special (near)"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"none"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"searches a bounding area according to the value of the ",Object(n.b)("inlineCode",{parentName:"td"},"fhirServer/search/useBoundingRadius")," property")))),Object(n.b)("p",null,"Due to performance implications, the ",Object(n.b)("inlineCode",{parentName:"p"},":exact")," modifier should be used for String searches where possible."),Object(n.b)("p",null,"At present, modifiers cannot be used with chained parameters. For example, a search with query string like ",Object(n.b)("inlineCode",{parentName:"p"},"subject:Basic.date:missing")," will result in an ",Object(n.b)("inlineCode",{parentName:"p"},"OperationOutcome")," explaining that the search parameter could not be processed."),Object(n.b)("p",null,"The ",Object(n.b)("inlineCode",{parentName:"p"},":text")," modifier is not supported in this version of the FHIR server and use of this modifier will results in an HTTP 400 error with an ",Object(n.b)("inlineCode",{parentName:"p"},"OperationOutcome")," that describes the failure."),Object(n.b)("h3",null,"Search prefixes"),Object(n.b)("p",null,"FHIR search prefixes are described at ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/search.html#prefix"}),"https://www.hl7.org/fhir/R4/search.html#prefix"),"."),Object(n.b)("p",null,"As defined in the specification, the following prefixes are supported for Number, Date, and Quantity search parameters:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"eq")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"ne")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"gt")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"lt")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"gt")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"le")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"sa")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"eb")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"ap"))),Object(n.b)("p",null,"For range targets (parameter values extracted from Range, Date/Period, and DateTime elements without fractional seconds), the prefixes are interpreted as according to ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/search.html#prefix"}),"https://www.hl7.org/fhir/R4/search.html#prefix"),"."),Object(n.b)("p",null,"For example, a search like ",Object(n.b)("inlineCode",{parentName:"p"},"Observation?date=2018-10-29T12:00:00Z")," would ",Object(n.b)("em",{parentName:"p"},"not")," match an Observation with an effectivePeriod of ",Object(n.b)("inlineCode",{parentName:"p"},"start=2018-10-29")," and ",Object(n.b)("inlineCode",{parentName:"p"},"end=2018-10-30")," because “the search range does not fully contain the range of the target value.” Similarly, a search like ",Object(n.b)("inlineCode",{parentName:"p"},"range=5||mg")," would not match a range value with ",Object(n.b)("inlineCode",{parentName:"p"},"low = 1 mg")," and ",Object(n.b)("inlineCode",{parentName:"p"},"high = 10 mg"),". To obtain all range values which contain a specific value, use the ",Object(n.b)("inlineCode",{parentName:"p"},"ap")," prefix which is defined to match when “the range of the search value overlaps with the range of the target value.”"),Object(n.b)("p",null,"If not specified on a query string, the default prefix is ",Object(n.b)("inlineCode",{parentName:"p"},"eq"),"."),Object(n.b)("h3",null,"Searching on Date"),Object(n.b)("p",null,"The IBM FHIR Server implements date search as according to the specification."),Object(n.b)("p",null,"The server supports up to 6 fractional seconds (microsecond granularity) for Instant and DateTime values and all extracted parameter values are stored in the database in UTC in order to improve data portability."),Object(n.b)("p",null,"Dates and DateTimes which are expressed without timezones are assumed to be in the local timezone of the application server at the time of parameter extraction.\nSimilarly, query parameter date values with no timezone are assumed to be in the local timezone of the server at the time the search is invoked.\nTo ensure consistency of search results, clients are recommended to include the timezone on all search query values that include a time."),Object(n.b)("p",null,"Finally, the server extends the specified capabilities with support for “exact match” semantics on fractional seconds."),Object(n.b)("p",null,"Query parameter values without fractional seconds are handled as an implicit range. For example, a search like ",Object(n.b)("inlineCode",{parentName:"p"},"Observatoin?date=2019-01-01T12:00:00Z")," would return resources with the following effectiveDateTime values:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00Z"),Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00.1Z"),Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00.999999Z")),Object(n.b)("p",null,"Query parameter values with fractional seconds are handled with exact match semantics (ignoring precision). For example, a search like ",Object(n.b)("inlineCode",{parentName:"p"},"Patient?birthdate=2019-01-01T12:00:00.1Z")," would include resources with the following effectiveDateTime values:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00.1Z"),Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00.100Z"),Object(n.b)("li",{parentName:"ul"},"2019-01-01T12:00:00.100000Z")),Object(n.b)("p",null,"Indexing fields of type ",Object(n.b)("inlineCode",{parentName:"p"},"Timing")," is not well-defined in the specification and is not supported in this version of the IBM FHIR Server."),Object(n.b)("h3",null,"Searching on Token"),Object(n.b)("p",null,"For search parameters of type token, resource values are not indexed unless the resource instance contains both a ",Object(n.b)("inlineCode",{parentName:"p"},"system")," ",Object(n.b)("strong",{parentName:"p"},"and")," ",Object(n.b)("inlineCode",{parentName:"p"},"code"),". The server implements the following variations of token search defined in the specification:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"[parameter]=[code]")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"[parameter]=[system]|[code]")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"[parameter]=|[code]"))),Object(n.b)("p",null,"However, the ",Object(n.b)("inlineCode",{parentName:"p"},"|[code]")," variant currently behaves like the ",Object(n.b)("inlineCode",{parentName:"p"},"[code]")," option, matching code values irrespective of the system instead of matching only on elements with missing/null system values as defined in the spec."),Object(n.b)("p",null,"The IBM FHIR Server does not yet support searching a token value by codesystem, irrespective of the value (",Object(n.b)("inlineCode",{parentName:"p"},"|[system]|"),")."),Object(n.b)("p",null,"For search parameters of type token that are defined on data fields of type ",Object(n.b)("inlineCode",{parentName:"p"},"ContactPoint"),", the FHIR server currently uses the ",Object(n.b)("inlineCode",{parentName:"p"},"ContactPoint.system")," and the ",Object(n.b)("inlineCode",{parentName:"p"},"ContactPoint.value")," instead of the ",Object(n.b)("inlineCode",{parentName:"p"},"ContactPoint.use")," field as described in the specification."),Object(n.b)("p",null,"Searching string values via a token search parameter is not currently supported."),Object(n.b)("h3",null,"Searching on Number"),Object(n.b)("p",null,"For fields of type ",Object(n.b)("inlineCode",{parentName:"p"},"decimal"),", the IBM FHIR Server computes an implicit range when the query parameter value has a prefix of ",Object(n.b)("inlineCode",{parentName:"p"},"eq")," (the default), ",Object(n.b)("inlineCode",{parentName:"p"},"ne"),", or ",Object(n.b)("inlineCode",{parentName:"p"},"ap"),". The computed range is based on the number of significant figures passed in the query string and further information can be found at ",Object(n.b)("a",i({parentName:"p"},{href:"https://www.hl7.org/fhir/R4/search.html#number"}),"https://www.hl7.org/fhir/R4/search.html#number"),".\nFor searches with the ",Object(n.b)("inlineCode",{parentName:"p"},"ap")," prefix, we use the range ",Object(n.b)("inlineCode",{parentName:"p"},"[implicitLowerBound - searchQueryValue * .1, implicitUpperBound + searchQueryValue * .1)")," to ensure that the ",Object(n.b)("inlineCode",{parentName:"p"},"ap")," range is broader than the implicit range of ",Object(n.b)("inlineCode",{parentName:"p"},"eq"),"."),Object(n.b)("h3",null,"Searching on Quantity"),Object(n.b)("p",null,"Quantity elements are not indexed unless they include either a valid ",Object(n.b)("inlineCode",{parentName:"p"},"system")," ",Object(n.b)("strong",{parentName:"p"},"and")," ",Object(n.b)("inlineCode",{parentName:"p"},"code")," for their unit ",Object(n.b)("strong",{parentName:"p"},"or")," a human-readable ",Object(n.b)("inlineCode",{parentName:"p"},"unit")," field.\nIf a Quantity element contains both a coded unit ",Object(n.b)("strong",{parentName:"p"},"and")," a display unit, then both will be indexed. Quantities that don’t include a ",Object(n.b)("inlineCode",{parentName:"p"},"value")," element are also skipped."),Object(n.b)("p",null,"The FHIR server does not perform any unit conversion or unit manipulation at this time. Quantity values should be searched using the same unit ",Object(n.b)("inlineCode",{parentName:"p"},"code")," that is included in the original resource."),Object(n.b)("p",null,"Similar to Numeric searches, the FHIR Server computes an implicit range for search query values with no range prefix (e.g. ",Object(n.b)("inlineCode",{parentName:"p"},"eq"),", ",Object(n.b)("inlineCode",{parentName:"p"},"ne"),", ",Object(n.b)("inlineCode",{parentName:"p"},"ap"),") based on the number of significant figures passed in the query string.\nFor searches with the ",Object(n.b)("inlineCode",{parentName:"p"},"ap")," prefix, we use the range ",Object(n.b)("inlineCode",{parentName:"p"},"[implicitLowerBound - searchQueryValue * .1, implicitUpperBound + searchQueryValue * .1)")," to ensure that the ",Object(n.b)("inlineCode",{parentName:"p"},"ap")," range is broader than the implicit range of ",Object(n.b)("inlineCode",{parentName:"p"},"eq"),"."),Object(n.b)("p",null,"The IBM FHIR Server does not consider the ",Object(n.b)("inlineCode",{parentName:"p"},"Quantity.comparator")," field as part of search processing at this time."),Object(n.b)("h3",null,"Searching on URI"),Object(n.b)("p",null,"URI searches on the IBM FHIR Server are case-sensitive with “exact-match” semantics. The ",Object(n.b)("inlineCode",{parentName:"p"},"above")," and ",Object(n.b)("inlineCode",{parentName:"p"},"below")," prefixes can be used to perform path-based matching that is based on the ",Object(n.b)("inlineCode",{parentName:"p"},"/")," delimiter."),Object(n.b)("h3",null,"Searching on Special Positional Search"),Object(n.b)("p",null,"Positional Search uses ",Object(n.b)("a",i({parentName:"p"},{href:"https://unitsofmeasure.org/ucum.html"}),"UCUM units")," of distance measure along with common variants: "),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",i({parentName:"tr"},{align:null}),"Unit of Measure"),Object(n.b)("th",i({parentName:"tr"},{align:null}),"Variant"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"KILOMETERS"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"km, kms, kilometer, kilometers")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"MILES"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"mi, mis, mile, miles")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"METERS"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"m, ms, meter, meters")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",i({parentName:"tr"},{align:null}),"FEET"),Object(n.b)("td",i({parentName:"tr"},{align:null}),"ft, fts, foot")))),Object(n.b)("p",null,"Note, the use of the surrounding bracket, such as ",Object(n.b)("inlineCode",{parentName:"p"},"[mi_us]")," is optional; ",Object(n.b)("inlineCode",{parentName:"p"},"mi_us")," is also valid."),Object(n.b)("h2",null,"HL7 FHIR R4 (v4.0.1) errata"),Object(n.b)("p",null,"We add information here as we find issues with the artifacts provided with this version of the specification."),Object(n.b)("p",null,"FHIR® is the registered trademark of HL7 and is used with the permission of HL7."))}p.isMDXComponent=!0},393:function(e){e.exports={data:{site:{pathPrefix:"/FHIR"}}}},394:function(e){e.exports={data:{site:{siteMetadata:{repository:{baseUrl:"https://github.com/IBM/FHIR",subDirectory:"/docs",branch:"master"}}}}}}}]);
//# sourceMappingURL=component---src-pages-conformance-md-6041bf2ce1ef5f53c140.js.map